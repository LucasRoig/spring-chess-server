{"version":3,"sources":["database/DbDetails.js","components/modal/ConfirmationModal.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","database/DatabaseService.js","database/DatabaseList.js","models/Constants.js","models/Position.js","models/Game.js","components/modal/Modal.js"],"names":["__webpack_require__","d","__webpack_exports__","GameHeader","DbDetails","tcomb__WEBPACK_IMPORTED_MODULE_0__","tcomb__WEBPACK_IMPORTED_MODULE_0___default","n","t","struct","whiteName","String","blackName","id","Number","name","gameHeaders","list","ConfirmationModal","handleCancel","_this","props","onCancel","close","handleConfirm","onConfirm","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","onClick","this","title","message","cancelButtonText","confirmButtonClass","confirmButtonText","ModalWindow","showConfirmationModal","showModal","propTypes","PropTypes","string","func","defaultProps","_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","PostDatabaseRequest","listDatabases","ApiService","get","then","res","status","data","console","log","catch","e","error","postDatabase","_ref","request","post","getDetails","createGame","databaseId","game","Game","deleteDatabase","delete","importPgn","file","formData","FormData","append","apply","DatabaseItem","react__WEBPACK_IMPORTED_MODULE_6___default","database","stopPropagation","properties","DatabaseService","onDelete","CreateDatabaseForm","_useState","useState","_useState2","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_5__","setName","type","placeholder","value","onChange","target","onDatabaseCreated","disabled","DatabaseList","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","db","state","databases","push","setState","onDatabaseDeleted","filter","loading","_this2","_this3","map","key","history","Component","WHITE","BLACK","Position","fen","lastMove","previousPosition","nextPosition","comment","sublines","color","moveNumber","Constants","find","pos","_default","positions","startingPosition","_Component","_getPrototypeOf2","_len","arguments","args","_key","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__","concat","document","getElementById","elementId","unmountComponentAtNode","parentNode","removeChild","removeElement","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_3__","element","targetDiv","body","appendChild","render"],"mappings":"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","file":"static/js/7.22e13eb7.chunk.js","sourcesContent":["import t from \"tcomb\";\r\n\r\nexport const GameHeader = t.struct({\r\n  whiteName: t.String,\r\n  blackName: t.String,\r\n  id: t.Number\r\n})\r\nexport const DbDetails = t.struct({\r\n  name: t.String,\r\n  id: t.Number,\r\n  gameHeaders: t.list(GameHeader)\r\n})\r\n","import React from \"react\"\r\nimport {ModalWindow, showModal} from \"./Modal\";\r\nimport PropTypes from \"prop-types\"\r\n\r\nclass ConfirmationModal extends ModalWindow {\r\n  static propTypes = {\r\n    title: PropTypes.string,\r\n    message: PropTypes.string,\r\n    onConfirm: PropTypes.func,\r\n    onCancel: PropTypes.func,\r\n    confirmButtonText: PropTypes.string,\r\n    cancelButtonText: PropTypes.string,\r\n    confirmButtonClass: PropTypes.string\r\n  }\r\n\r\n  static defaultProps = {\r\n    title: \"Confirmation\",\r\n    message: \"Êtes-vous sûr ?\",\r\n    onConfirm: () => null,\r\n    onCancel: () => null,\r\n    confirmButtonText: \"Valider\",\r\n    cancelButtonText : \"Annuler\",\r\n    confirmButtonClass: \"is-success\"\r\n  }\r\n\r\n  handleCancel = () => {\r\n    this.props.onCancel();\r\n    this.close();\r\n  }\r\n\r\n  handleConfirm = () => {\r\n    this.props.onConfirm();\r\n    this.close();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"modal is-active\">\r\n        <div className=\"modal-background\" onClick={this.handleCancel}/>\r\n        <div className=\"modal-card\">\r\n          <header className=\"modal-card-head\">\r\n            <p className=\"modal-card-title\">{this.props.title}</p>\r\n          </header>\r\n          <section className=\"modal-card-body\">\r\n            <p>{this.props.message}</p>\r\n          </section>\r\n          <footer className=\"modal-card-foot space-between\">\r\n            <button className=\"button\" onClick={this.handleCancel}>{this.props.cancelButtonText}</button>\r\n            <button className={\"button \" + this.props.confirmButtonClass} onClick={this.handleConfirm}>\r\n              {this.props.confirmButtonText}\r\n            </button>\r\n          </footer>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport function showConfirmationModal(props) {\r\n  showModal(<ConfirmationModal {...props}/>)\r\n}\r\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import ApiService from \"../services/ApiService\";\r\nimport t from \"tcomb\";\r\nimport Game from \"../models/Game\";\r\nimport {DbDetails, GameHeader} from \"./DbDetails\";\r\n\r\nconst listDatabases = () => {\r\n  return ApiService.get(\"/database\").then(res => {\r\n    if (res.status === 200) {\r\n      return res.data;\r\n    } else {\r\n      throw res;\r\n    }\r\n  }).then(data => {\r\n    console.log(data)\r\n    return data\r\n  }).catch(e => {\r\n    console.error(e);\r\n    //TODO\r\n  })\r\n}\r\n\r\nconst PostDatabaseRequest = t.struct({\r\n  name: t.String,\r\n}, \"PostDatabaseRequest\")\r\n\r\nconst postDatabase = ({name}) => {\r\n  let request = PostDatabaseRequest({name});\r\n  return ApiService.post(\"/database\", request).then(res => {\r\n    if (res.status === 200 || res.status === 201) {\r\n      console.log(res.data)\r\n      return res.data\r\n    } else {\r\n      throw res;\r\n    }\r\n  }).catch(e => {\r\n    console.error(e);\r\n    //TODO\r\n  })\r\n}\r\n\r\nconst getDetails = (id) => {\r\n  return ApiService.get(\"/database/\" + id).then(res => {\r\n    if (res.status === 200) {\r\n      let d = DbDetails(res.data)\r\n      console.log(d)\r\n      return d;\r\n    } else {\r\n      throw res\r\n    }\r\n  }).catch(e => {\r\n    console.error(e);\r\n    //TODO\r\n  })\r\n}\r\n\r\nconst createGame = (databaseId) => {\r\n  let game = new Game();\r\n  return ApiService.post(\"/database/\" + databaseId + \"/game\", game).then(res => {\r\n    if (res.status === 200 || res.status === 201) {\r\n      let gameHeader = GameHeader({\r\n        whiteName: res.data.whiteName,\r\n        blackName: res.data.blackName,\r\n        id: res.data.id\r\n      })\r\n      return gameHeader;\r\n    } else {\r\n      throw res;\r\n    }\r\n  }).catch(e => {\r\n    console.error(e);\r\n    //TODO\r\n  })\r\n}\r\n\r\nconst deleteDatabase = (databaseId) => {\r\n  return ApiService.delete(\"/database/\" + databaseId).then(res => {\r\n    if (res.status === 200) {\r\n      return true;\r\n    } else {\r\n      throw res;\r\n    }\r\n  }).catch(e => {\r\n    console.error(e);\r\n    //TODO\r\n  });\r\n}\r\n\r\nconst importPgn = (databaseId, file) => {\r\n  const formData = new FormData();\r\n  formData.append(\"pgnFile\", file, file.name);\r\n  return ApiService.post(\"/database/\" + databaseId + \"/uploadPgn\", formData).then(res => {\r\n    if (res.status !== 200 && res.status !== 201) {\r\n      throw res;\r\n    } else {\r\n      return GameHeader(...res.data);\r\n    }\r\n  });\r\n}\r\n\r\nexport default {\r\n  listDatabases,\r\n  postDatabase,\r\n  getDetails,\r\n  createGame,\r\n  deleteDatabase,\r\n  importPgn\r\n}\r\n","import React, {Component, useState} from 'react';\r\nimport './DatabaseList.scss';\r\nimport DatabaseService from \"./DatabaseService\";\r\nimport {showConfirmationModal} from \"../components/modal/ConfirmationModal\";\r\n\r\n\r\nconst DatabaseItem = (props) => {\r\n  function del(e) {\r\n    e.stopPropagation();\r\n    let properties = {\r\n      title: \"Suppression de la base \" + props.database.name,\r\n      message: \"Êtes vous sûr de vouloir supprimer la base \" + props.database.name,\r\n      confirmButtonText: \"Supprimer\",\r\n      confirmButtonClass: \"is-danger\",\r\n      onConfirm: () => {\r\n        const databaseId = props.database.id;\r\n        DatabaseService.deleteDatabase(databaseId).then(res => {\r\n          if (res) {\r\n            props.onDelete(databaseId)\r\n          }\r\n        })\r\n      }\r\n    }\r\n    showConfirmationModal(properties)\r\n  }\r\n\r\n  return (\r\n    <tr onClick={props.onClick}>\r\n      <td>{props.database.name}</td>\r\n      <td>{props.database.gameHeaders.length}</td>\r\n      <td></td>\r\n      <td>\r\n        <button className=\"button is-danger\" onClick={del}>Supprimer</button>\r\n      </td>\r\n    </tr>\r\n  )\r\n}\r\n\r\nconst CreateDatabaseForm = (props) => {\r\n  const [name, setName] = useState(\"\");\r\n  function createDatabase() {\r\n    if (name.length === 0) {\r\n      return;\r\n    }\r\n    DatabaseService.postDatabase({name}).then(database => {\r\n      props.onDatabaseCreated(database)\r\n    })\r\n  }\r\n  return (\r\n    <div className=\"field has-addons\">\r\n      <div className=\"control\">\r\n        <input className=\"input\" type=\"text\" placeholder=\"Créer une base\" value={name}\r\n               onChange={(e) => setName(e.target.value)}/>\r\n      </div>\r\n      <div className=\"control\" >\r\n        <span className=\"button is-success\" onClick={createDatabase} disabled={name.length === 0}>\r\n          Valider\r\n        </span>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nclass DatabaseList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      databases: [],\r\n      loading: false,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    DatabaseService.listDatabases().then(databases => {\r\n      this.setState({\r\n        databases\r\n      })\r\n    });\r\n  }\r\n\r\n  onDatabaseCreated = (database) => {\r\n      let db = this.state.databases;\r\n      db.push(database);\r\n      this.setState({\r\n        databases: db\r\n      })\r\n  }\r\n\r\n  onDatabaseDeleted = (databaseId) => {\r\n    let db = this.state.databases;\r\n    db = db.filter(i => i.id !== databaseId);\r\n    this.setState({\r\n      databases: db\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <CreateDatabaseForm onDatabaseCreated={this.onDatabaseCreated}/>\r\n        <table className=\"databases table is-striped is-hoverable is-fullwidth\">\r\n          <thead>\r\n          <tr>\r\n            <th>Nom</th>\r\n            <th>Nombre de parties</th>\r\n            <th>Types</th>\r\n            <th/>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          {this.state.databases && this.state.databases.map(database =>\r\n            <DatabaseItem database={database} key={database.id} onDelete={this.onDatabaseDeleted}\r\n                          onClick={() => this.props.history.push('/database/' + database.id)}/>)\r\n          }\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DatabaseList;\r\n","export let WHITE = \"w\";\r\nexport let BLACK = \"b\";","import * as Constants from './Constants';\r\nexport default class Position{\r\n    constructor(fen, lastMove, previousPosition){\r\n        this.fen = fen;\r\n        this.lastMove = lastMove;\r\n        this.previousPosition = previousPosition;\r\n        this.nextPosition = null;\r\n        this.comment = \"\";\r\n        this.sublines = [];\r\n\r\n        if(this.previousPosition){\r\n            if(this.lastMove.color === 'w'){\r\n                this.moveNumber = this.previousPosition.moveNumber + 1;\r\n            }else{\r\n                this.moveNumber = this.previousPosition.moveNumber\r\n            }\r\n        }else{\r\n            this.moveNumber = 0\r\n        }\r\n    }\r\n\r\n    sideToMove() {\r\n        if(!this.lastMove || this.lastMove.color === Constants.BLACK)\r\n            return Constants.WHITE\r\n        else\r\n            return Constants.BLACK\r\n    }\r\n\r\n    addNextPosition(nextPosition){\r\n        if(!this.nextPosition){\r\n            this.nextPosition = nextPosition;\r\n            return\r\n        }\r\n        if(this.nextPosition.fen === nextPosition.fen){\r\n            return\r\n        }\r\n        if(!this.sublines.find(pos => pos.fen === nextPosition.fen)){\r\n            this.sublines.push(nextPosition)\r\n        }\r\n    }\r\n}\r\n","import Position from './Position'\r\n\r\nconst STARTING_FEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1'\r\nexport default class{\r\n    constructor(){\r\n        this.positions = [];\r\n        this.startingPosition = new Position(STARTING_FEN);\r\n        this.whiteName = \"white\"\r\n        this.blackName = \"black\"\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport {render, unmountComponentAtNode} from \"react-dom\"\r\n\r\nexport class ModalWindow extends Component {\r\n  close = () => {\r\n    removeElement();\r\n  }\r\n}\r\n\r\nconst elementId = \"modal-window\";\r\n\r\nfunction removeElement() {\r\n  const target = document.getElementById(elementId);\r\n  if (target) {\r\n    unmountComponentAtNode(target);\r\n    target.parentNode.removeChild(target);\r\n  }\r\n}\r\n\r\n\r\nfunction createElement(element) {\r\n  let targetDiv = document.getElementById(elementId);\r\n  if (!targetDiv) {\r\n    targetDiv = document.createElement(\"div\");\r\n    targetDiv.id = elementId;\r\n    document.body.appendChild(targetDiv)\r\n  }\r\n  render(element, targetDiv);\r\n}\r\n\r\nexport function showModal(element) {\r\n  createElement(element);\r\n}\r\n"],"sourceRoot":""}