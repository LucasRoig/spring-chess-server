(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{100:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var a=o.apply(null,r);a&&e.push(a)}else if("object"===i)for(var l in r)n.call(r,l)&&r[l]&&e.push(l)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeSquareCenter=t.cancel=t.end=t.move=t.dragNewPiece=t.start=void 0;var r=n(95),o=n(81),i=n(124),a=n(125);function l(e){requestAnimationFrame(function(){var t,n=e.draggable.current;if(n){(null===(t=e.animation.current)||void 0===t?void 0:t.plan.anims.has(n.orig))&&(e.animation.current=void 0);var r=e.pieces.get(n.orig);if(r&&o.samePiece(r,n.piece)){if(!n.started&&o.distanceSq(n.pos,n.origPos)>=Math.pow(e.draggable.distance,2)&&(n.started=!0),n.started){if("function"===typeof n.element){var i=n.element();if(!i)return;i.cgDragging=!0,i.classList.add("dragging"),n.element=i}var a=e.dom.bounds();o.translateAbs(n.element,[n.pos[0]-a.left-a.width/16,n.pos[1]-a.top-a.height/16])}}else s(e);l(e)}})}function s(e){var t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,r.unselect(e),u(e),e.dom.redraw())}function u(e){var t=e.dom.elements;t.ghost&&o.setVisible(t.ghost,!1)}function c(e,t,n){var r=o.key2pos(e);return t||(r[0]=7-r[0],r[1]=7-r[1]),[n.left+n.width*r[0]/8+n.width/16,n.top+n.height*(7-r[1])/8+n.height/16]}function f(e,t){for(var n=e.dom.elements.board.firstChild;n;){if(n.cgKey===t&&"PIECE"===n.tagName)return n;n=n.nextSibling}}t.start=function(e,t){if((void 0===t.button||0===t.button)&&!(t.touches&&t.touches.length>1)){var n=e.dom.bounds(),s=o.eventPosition(t),u=r.getKeyAtDomPos(s,r.whitePov(e),n);if(u){var d=e.pieces.get(u),p=e.selected;p||!e.drawable.enabled||!e.drawable.eraseOnClick&&d&&d.color===e.turnColor||i.clear(e),!1===t.cancelable||t.touches&&e.movable.color&&!d&&!p&&!function(e,t){var n=r.whitePov(e),i=e.dom.bounds(),a=Math.pow(i.width/8,2);for(var l in e.pieces){var s=c(l,n,i);if(o.distanceSq(s,t)<=a)return!0}return!1}(e,s)||t.preventDefault();var v=!!e.premovable.current,h=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&r.canMove(e,e.selected,u)?a.anim(function(e){return r.selectSquare(e,u)},e):r.selectSquare(e,u);var b=e.selected===u,g=f(e,u);if(d&&g&&b&&r.isDraggable(e,u)){e.draggable.current={orig:u,piece:d,origPos:s,pos:s,started:e.draggable.autoDistance&&e.stats.dragged,element:g,previouslySelected:p,originTarget:t.target},g.cgDragging=!0,g.classList.add("dragging");var m=e.dom.elements.ghost;m&&(m.className="ghost ".concat(d.color," ").concat(d.role),o.translateAbs(m,o.posToTranslateAbs(n)(o.key2pos(u),r.whitePov(e))),o.setVisible(m,!0)),l(e)}else v&&r.unsetPremove(e),h&&r.unsetPredrop(e);e.dom.redraw()}}},t.dragNewPiece=function(e,t,n,r){e.pieces.set("a0",t),e.dom.redraw();var i=o.eventPosition(n);e.draggable.current={orig:"a0",piece:t,origPos:i,pos:i,started:!0,element:function(){return f(e,"a0")},originTarget:n.target,newPiece:!0,force:!!r},l(e)},t.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=o.eventPosition(t))},t.end=function(e,t){var n=e.draggable.current;if(n)if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"!==t.type||n.originTarget===t.target||n.newPiece){r.unsetPremove(e),r.unsetPredrop(e);var i=o.eventPosition(t)||n.pos,a=r.getKeyAtDomPos(i,r.whitePov(e),e.dom.bounds());a&&n.started&&n.orig!==a?n.newPiece?r.dropNewPiece(e,n.orig,a,n.force):(e.stats.ctrlKey=t.ctrlKey,r.userMove(e,n.orig,a)&&(e.stats.dragged=!0)):n.newPiece?e.pieces.delete(n.orig):e.draggable.deleteOnDropOff&&!a&&(e.pieces.delete(n.orig),r.callUserFunction(e.events.change)),(n.orig!==n.previouslySelected||n.orig!==a&&a)&&e.selectable.enabled||r.unselect(e),u(e),e.draggable.current=void 0,e.dom.redraw()}else e.draggable.current=void 0},t.cancel=s,t.computeSquareCenter=c},107:function(e,t,n){var r,o=function(e){var t="b",n="w",r=-1,o="p",i="n",a="b",l="r",s="q",u="k",c="pnbrqkPNBRQK",f="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",d=["1-0","0-1","1/2-1/2","*"],p={b:[16,32,17,15],w:[-16,-32,-17,-15]},v={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},h=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],b=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],g={p:0,n:1,b:2,r:3,q:4,k:5},m={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},y={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},w=7,P=6,k=1,C=0,M={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},E={w:[{square:M.a1,flag:y.QSIDE_CASTLE},{square:M.h1,flag:y.KSIDE_CASTLE}],b:[{square:M.a8,flag:y.QSIDE_CASTLE},{square:M.h8,flag:y.KSIDE_CASTLE}]},S=new Array(128),O={w:r,b:r},_=n,T={w:0,b:0},x=r,A=0,j=1,D=[],L={};function I(){S=new Array(128),O={w:r,b:r},_=n,T={w:0,b:0},x=r,A=0,j=1,D=[],L={},U(q())}function R(){N(f)}function N(e){var o=e.split(/\s+/),i=o[0],a=0;if(!K(e).valid)return!1;I();for(var l=0;l<i.length;l++){var s=i.charAt(l);if("/"===s)a+=8;else if(-1!=="0123456789".indexOf(s))a+=parseInt(s,10);else{var u=s<"a"?n:t;W({type:s.toLowerCase(),color:u},ae(a)),a++}}return _=o[1],o[2].indexOf("K")>-1&&(T.w|=y.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(T.w|=y.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(T.b|=y.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(T.b|=y.QSIDE_CASTLE),x="-"===o[3]?r:M[o[3]],A=parseInt(o[4],10),j=parseInt(o[5],10),U(q()),!0}function K(e){var t="No errors.",n="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",a="3rd field (castling availability) is invalid.",l="2nd field (side to move) is invalid.",s="1st field (piece positions) does not contain 8 '/'-delimited rows.",u="1st field (piece positions) is invalid [consecutive numbers].",c="1st field (piece positions) is invalid [invalid piece].",f="1st field (piece positions) is invalid [row too large].",d="Illegal en-passant square",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:n};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:a};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:l};var v=p[0].split("/");if(8!==v.length)return{valid:!1,error_number:7,error:s};for(var h=0;h<v.length;h++){for(var b=0,g=!1,m=0;m<v[h].length;m++)if(isNaN(v[h][m])){if(!/^[prnbqkPRNBQK]$/.test(v[h][m]))return{valid:!1,error_number:9,error:c};b+=1,g=!1}else{if(g)return{valid:!1,error_number:8,error:u};b+=parseInt(v[h][m],10),g=!0}if(8!==b)return{valid:!1,error_number:10,error:f}}return"3"==p[3][1]&&"w"==p[1]||"6"==p[3][1]&&"b"==p[1]?{valid:!1,error_number:11,error:d}:{valid:!0,error_number:0,error:t}}function q(){for(var e=0,o="",i=M.a8;i<=M.h1;i++){if(null==S[i])e++;else{e>0&&(o+=e,e=0);var a=S[i].color,l=S[i].type;o+=a===n?l.toUpperCase():l.toLowerCase()}i+1&136&&(e>0&&(o+=e),i!==M.h1&&(o+="/"),e=0,i+=8)}var s="";T[n]&y.KSIDE_CASTLE&&(s+="K"),T[n]&y.QSIDE_CASTLE&&(s+="Q"),T[t]&y.KSIDE_CASTLE&&(s+="k"),T[t]&y.QSIDE_CASTLE&&(s+="q"),s=s||"-";var u=x===r?"-":ae(x);return[o,_,s,u,A,j].join(" ")}function H(e){for(var t=0;t<e.length;t+=2)"string"===typeof e[t]&&"string"===typeof e[t+1]&&(L[e[t]]=e[t+1]);return L}function U(e){D.length>0||(e!==f?(L.SetUp="1",L.FEN=e):(delete L.SetUp,delete L.FEN))}function B(e){var t=S[M[e]];return t?{type:t.type,color:t.color}:null}function W(e,t){if(!("type"in e&&"color"in e))return!1;if(-1===c.indexOf(e.type.toLowerCase()))return!1;if(!(t in M))return!1;var n=M[t];return(e.type!=u||O[e.color]==r||O[e.color]==n)&&(S[n]={type:e.type,color:e.color},e.type===u&&(O[e.color]=n),U(q()),!0)}function F(e,t,n,r,i){var a={color:_,from:t,to:n,flags:r,piece:e[t].type};return i&&(a.flags|=y.PROMOTION,a.promotion=i),e[n]?a.captured=e[n].type:r&y.EP_CAPTURE&&(a.captured=o),a}function Q(e){function t(e,t,n,r,u){if(e[n].type!==o||oe(r)!==C&&oe(r)!==w)t.push(F(e,n,r,u));else for(var c=[s,l,a,i],f=0,d=c.length;f<d;f++)t.push(F(e,n,r,u,c[f]))}var n=[],r=_,u=le(r),c={b:k,w:P},f=M.a8,d=M.h1,h=!1,b=!("undefined"!==typeof e&&"legal"in e)||e.legal;if("undefined"!==typeof e&&"square"in e){if(!(e.square in M))return[];f=d=M[e.square],h=!0}for(var g=f;g<=d;g++)if(136&g)g+=7;else{var m=S[g];if(null!=m&&m.color===r)if(m.type===o){var E=g+p[r][0];if(null==S[E]){t(S,n,g,E,y.NORMAL);E=g+p[r][1];c[r]===oe(g)&&null==S[E]&&t(S,n,g,E,y.BIG_PAWN)}for(A=2;A<4;A++){136&(E=g+p[r][A])||(null!=S[E]&&S[E].color===u?t(S,n,g,E,y.CAPTURE):E===x&&t(S,n,g,x,y.EP_CAPTURE))}}else for(var A=0,j=v[m.type].length;A<j;A++){var D=v[m.type][A];for(E=g;!(136&(E+=D));){if(null!=S[E]){if(S[E].color===r)break;t(S,n,g,E,y.CAPTURE);break}if(t(S,n,g,E,y.NORMAL),"n"===m.type||"k"===m.type)break}}}if(!h||d===O[r]){if(T[r]&y.KSIDE_CASTLE){var L=(I=O[r])+2;null!=S[I+1]||null!=S[L]||X(u,O[r])||X(u,I+1)||X(u,L)||t(S,n,O[r],L,y.KSIDE_CASTLE)}if(T[r]&y.QSIDE_CASTLE){var I;L=(I=O[r])-2;null!=S[I-1]||null!=S[I-2]||null!=S[I-3]||X(u,O[r])||X(u,I-1)||X(u,L)||t(S,n,O[r],L,y.QSIDE_CASTLE)}}if(!b)return n;var R=[];for(g=0,j=n.length;g<j;g++)te(n[g]),$(r)||R.push(n[g]),ne();return R}function V(e,t){var n="";if(e.flags&y.KSIDE_CASTLE)n="O-O";else if(e.flags&y.QSIDE_CASTLE)n="O-O-O";else{var r=function(e,t){for(var n=Q({legal:!t}),r=e.from,o=e.to,i=e.piece,a=0,l=0,s=0,u=0,c=n.length;u<c;u++){var f=n[u].from,d=n[u].to,p=n[u].piece;i===p&&r!==f&&o===d&&(a++,oe(r)===oe(f)&&l++,ie(r)===ie(f)&&s++)}if(a>0)return l>0&&s>0?ae(r):s>0?ae(r).charAt(1):ae(r).charAt(0);return""}(e,t);e.piece!==o&&(n+=e.piece.toUpperCase()+r),e.flags&(y.CAPTURE|y.EP_CAPTURE)&&(e.piece===o&&(n+=ae(e.from)[0]),n+="x"),n+=ae(e.to),e.flags&y.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return te(e),G()&&(Z()?n+="#":n+="+"),ne(),n}function z(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function X(e,r){for(var i=M.a8;i<=M.h1;i++)if(136&i)i+=7;else if(null!=S[i]&&S[i].color===e){var a=S[i],l=i-r,s=l+119;if(h[s]&1<<g[a.type]){if(a.type===o){if(l>0){if(a.color===n)return!0}else if(a.color===t)return!0;continue}if("n"===a.type||"k"===a.type)return!0;for(var u=b[s],c=i+u,f=!1;c!==r;){if(null!=S[c]){f=!0;break}c+=u}if(!f)return!0}}return!1}function $(e){return X(le(e),O[e])}function G(){return $(_)}function Z(){return G()&&0===Q().length}function Y(){return!G()&&0===Q().length}function J(){for(var e={},t=[],n=0,r=0,o=M.a8;o<=M.h1;o++)if(r=(r+1)%2,136&o)o+=7;else{var l=S[o];l&&(e[l.type]=l.type in e?e[l.type]+1:1,l.type===a&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[a]||1===e[i]))return!0;if(n===e[a]+2){var s=0,u=t.length;for(o=0;o<u;o++)s+=t[o];if(0===s||s===u)return!0}return!1}function ee(){for(var e=[],t={},n=!1;;){var r=ne();if(!r)break;e.push(r)}for(;;){var o=q().split(" ").slice(0,4).join(" ");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(n=!0),!e.length)break;te(e.pop())}return n}function te(e){var n=_,i=le(n);if(function(e){D.push({move:e,kings:{b:O.b,w:O.w},turn:_,castling:{b:T.b,w:T.w},ep_square:x,half_moves:A,move_number:j})}(e),S[e.to]=S[e.from],S[e.from]=null,e.flags&y.EP_CAPTURE&&(_===t?S[e.to-16]=null:S[e.to+16]=null),e.flags&y.PROMOTION&&(S[e.to]={type:e.promotion,color:n}),S[e.to].type===u){if(O[S[e.to].color]=e.to,e.flags&y.KSIDE_CASTLE){var a=e.to-1,l=e.to+1;S[a]=S[l],S[l]=null}else if(e.flags&y.QSIDE_CASTLE){a=e.to+1,l=e.to-2;S[a]=S[l],S[l]=null}T[n]=""}if(T[n])for(var s=0,c=E[n].length;s<c;s++)if(e.from===E[n][s].square&&T[n]&E[n][s].flag){T[n]^=E[n][s].flag;break}if(T[i])for(s=0,c=E[i].length;s<c;s++)if(e.to===E[i][s].square&&T[i]&E[i][s].flag){T[i]^=E[i][s].flag;break}x=e.flags&y.BIG_PAWN?"b"===_?e.to-16:e.to+16:r,e.piece===o?A=0:e.flags&(y.CAPTURE|y.EP_CAPTURE)?A=0:A++,_===t&&j++,_=le(_)}function ne(){var e=D.pop();if(null==e)return null;var n=e.move;O=e.kings,_=e.turn,T=e.castling,x=e.ep_square,A=e.half_moves,j=e.move_number;var r,i,a=_,l=le(_);if(S[n.from]=S[n.to],S[n.from].type=n.piece,S[n.to]=null,n.flags&y.CAPTURE)S[n.to]={type:n.captured,color:l};else if(n.flags&y.EP_CAPTURE){var s;s=a===t?n.to-16:n.to+16,S[s]={type:o,color:l}}n.flags&(y.KSIDE_CASTLE|y.QSIDE_CASTLE)&&(n.flags&y.KSIDE_CASTLE?(r=n.to+1,i=n.to-1):n.flags&y.QSIDE_CASTLE&&(r=n.to-2,i=n.to+1),S[r]=S[i],S[i]=null);return n}function re(e,t){var n=z(e);if(t){var r=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var o=r[1],i=r[2],a=r[3],l=r[4]}for(var s=Q(),u=0,c=s.length;u<c;u++){if(n===z(V(s[u]))||t&&n===z(V(s[u],!0)))return s[u];if(r&&(!o||o.toLowerCase()==s[u].piece)&&M[i]==s[u].from&&M[a]==s[u].to&&(!l||l.toLowerCase()==s[u].promotion))return s[u]}return null}function oe(e){return e>>4}function ie(e){return 15&e}function ae(e){var t=ie(e),n=oe(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function le(e){return e===n?t:n}function se(e){var t=function e(t){var n=t instanceof Array?[]:{};for(var r in t)n[r]="object"===typeof r?e(t[r]):t[r];return n}(e);t.san=V(t,!1),t.to=ae(t.to),t.from=ae(t.from);var n="";for(var r in y)y[r]&t.flags&&(n+=m[r]);return t.flags=n,t}function ue(e){return e.replace(/^\s+|\s+$/g,"")}return N("undefined"===typeof e?f:e),{WHITE:n,BLACK:t,PAWN:o,KNIGHT:i,BISHOP:a,ROOK:l,QUEEN:s,KING:u,SQUARES:function(){for(var e=[],t=M.a8;t<=M.h1;t++)136&t?t+=7:e.push(ae(t));return e}(),FLAGS:m,load:function(e){return N(e)},reset:function(){return R()},moves:function(e){for(var t=Q(e),n=[],r=0,o=t.length;r<o;r++)"undefined"!==typeof e&&"verbose"in e&&e.verbose?n.push(se(t[r])):n.push(V(t[r],!1));return n},in_check:function(){return G()},in_checkmate:function(){return Z()},in_stalemate:function(){return Y()},in_draw:function(){return A>=100||Y()||J()||ee()},insufficient_material:function(){return J()},in_threefold_repetition:function(){return ee()},game_over:function(){return A>=100||Z()||Y()||J()||ee()},validate_fen:function(e){return K(e)},fen:function(){return q()},pgn:function(e){var t="object"===typeof e&&"string"===typeof e.newline_char?e.newline_char:"\n",n="object"===typeof e&&"number"===typeof e.max_width?e.max_width:0,r=[],o=!1;for(var i in L)r.push("["+i+' "'+L[i]+'"]'+t),o=!0;o&&D.length&&r.push(t);for(var a=[];D.length>0;)a.push(ne());for(var l=[],s="";a.length>0;){var u=a.pop();D.length||"b"!==u.color?"w"===u.color&&(s.length&&l.push(s),s=j+"."):s=j+". ...",s=s+" "+V(u,!1),te(u)}if(s.length&&l.push(s),"undefined"!==typeof L.Result&&l.push(L.Result),0===n)return r.join("")+l.join(" ");var c=0;for(i=0;i<l.length;i++)c+l[i].length>n&&0!==i?(" "===r[r.length-1]&&r.pop(),r.push(t),c=0):0!==i&&(r.push(" "),c++),r.push(l[i]),c+=l[i].length;return r.join("")},load_pgn:function(e,t){var n="undefined"!==typeof t&&"sloppy"in t&&t.sloppy;function r(e){return e.replace(/\\/g,"\\")}var o="object"===typeof t&&"string"===typeof t.newline_char?t.newline_char:"\r?\n",i=new RegExp("^(\\[(.|"+r(o)+")*\\])("+r(o)+")*1.("+r(o)+"|.)*$","g"),a=e.replace(i,"$1");"["!==a[0]&&(a=""),R();var l=function(e,t){for(var n="object"===typeof t&&"string"===typeof t.newline_char?t.newline_char:"\r?\n",o={},i=e.split(new RegExp(r(n))),a="",l="",s=0;s<i.length;s++)a=i[s].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),l=i[s].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),ue(a).length>0&&(o[a]=l);return o}(a,t);for(var s in l)H([s,l[s]]);if("1"===l.SetUp&&!("FEN"in l&&N(l.FEN)))return!1;var u=e.replace(a,"").replace(new RegExp(r(o),"g")," ");u=u.replace(/(\{[^}]+\})+?/g,"");for(var c=/(\([^\(\)]+\))+?/g;c.test(u);)u=u.replace(c,"");var f=ue(u=(u=(u=u.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));f=f.join(",").replace(/,,+/g,",").split(",");for(var p="",v=0;v<f.length-1;v++){if(null==(p=re(f[v],n)))return!1;te(p)}if(p=f[f.length-1],d.indexOf(p)>-1)(function(e){for(var t in e)return!0;return!1})(L)&&"undefined"===typeof L.Result&&H(["Result",p]);else{if(null==(p=re(p,n)))return!1;te(p)}return!0},header:function(){return H(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=M.a8;t<=M.h1;t++){if(0===ie(t)&&(e+=" "+"87654321"[oe(t)]+" |"),null==S[t])e+=" . ";else{var r=S[t].type;e+=" "+(S[t].color===n?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return _},move:function(e,t){var n="undefined"!==typeof t&&"sloppy"in t&&t.sloppy,r=null;if("string"===typeof e)r=re(e,n);else if("object"===typeof e)for(var o=Q(),i=0,a=o.length;i<a;i++)if(e.from===ae(o[i].from)&&e.to===ae(o[i].to)&&(!("promotion"in o[i])||e.promotion===o[i].promotion)){r=o[i];break}if(!r)return null;var l=se(r);return te(r),l},undo:function(){var e=ne();return e?se(e):null},clear:function(){return I()},put:function(e,t){return W(e,t)},get:function(e){return B(e)},remove:function(e){return function(e){var t=B(e);return S[M[e]]=null,t&&t.type===u&&(O[t.color]=r),U(q()),t}(e)},perft:function(e){return function e(t){for(var n=Q({legal:!1}),r=0,o=_,i=0,a=n.length;i<a;i++)te(n[i]),$(o)||(t-1>0?r+=e(t-1):r++),ne();return r}(e)},square_color:function(e){if(e in M){var t=M[e];return(oe(t)+ie(t))%2===0?"light":"dark"}return null},history:function(e){for(var t=[],n=[],r=("undefined"!==typeof e&&"verbose"in e&&e.verbose);D.length>0;)t.push(ne());for(;t.length>0;){var o=t.pop();r?n.push(se(o)):n.push(V(o)),te(o)}return n}}};t.Chess=o,void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)},108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ranks=t.files=t.colors=void 0,t.colors=["white","black"],t.files=["a","b","c","d","e","f","g","h"],t.ranks=["1","2","3","4","5","6","7","8"]},109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.write=t.read=t.initial=void 0;var r=n(81),o=n(108);t.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";var i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},a={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};t.read=function(e){"start"===e&&(e=t.initial);var n=new Map,o=7,a=0,l=!0,s=!1,u=void 0;try{for(var c,f=e[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var d=c.value;switch(d){case" ":return n;case"/":if(--o<0)return n;a=0;break;case"~":var p=n.get(r.pos2key([a,o]));p&&(p.promoted=!0);break;default:var v=d.charCodeAt(0);if(v<57)a+=v-48;else{var h=d.toLowerCase();n.set(r.pos2key([a,o]),{role:i[h],color:d===h?"black":"white"}),++a}}}}catch(b){s=!0,u=b}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}return n},t.write=function(e){return r.invRanks.map(function(t){return o.files.map(function(n){var r=e.get(n+t);if(r){var o=a[r.role];return"white"===r.color?o.toUpperCase():o}return"1"}).join("")}).join("/").replace(/1{2,}/g,function(e){return e.length.toString()})}},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.cancel=t.end=t.move=t.processDraw=t.start=void 0;var r=n(95),o=n(81),i=["green","red","blue","yellow"];function a(e){requestAnimationFrame(function(){var t=e.drawable.current;if(t){var n=r.getKeyAtDomPos(t.pos,r.whitePov(e),e.dom.bounds());n||(t.snapToValidMove=!1);var o=t.snapToValidMove?r.getSnappedKeyAtDomPos(t.orig,t.pos,r.whitePov(e),e.dom.bounds()):n;o!==t.mouseSq&&(t.mouseSq=o,t.dest=o!==t.orig?o:void 0,e.dom.redrawNow()),a(e)}})}function l(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function s(e){var t=(e.shiftKey||e.ctrlKey)&&o.isRightButton(e),n=e.altKey||e.metaKey||e.getModifierState("AltGraph");return i[(t?1:0)+(n?2:0)]}function u(e){e.onChange&&e.onChange(e.shapes)}t.start=function(e,t){if(!(t.touches&&t.touches.length>1)){t.stopPropagation(),t.preventDefault(),t.ctrlKey?r.unselect(e):r.cancelMove(e);var n=o.eventPosition(t),i=r.getKeyAtDomPos(n,r.whitePov(e),e.dom.bounds());i&&(e.drawable.current={orig:i,pos:n,brush:s(t),snapToValidMove:e.drawable.defaultSnapToValidMove},a(e))}},t.processDraw=a,t.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=o.eventPosition(t))},t.end=function(e){var t=e.drawable.current;t&&(t.mouseSq&&function(e,t){var n=function(e){return e.orig===t.orig&&e.dest===t.dest},r=e.shapes.find(n);r&&(e.shapes=e.shapes.filter(function(e){return!n(e)})),r&&r.brush===t.brush||e.shapes.push(t),u(e)}(e.drawable,t),l(e))},t.cancel=l,t.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),u(e.drawable))}},125:function(e,t,n){"use strict";var r=n(97);Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.anim=void 0;var o=n(81);function i(e,t){var n=e(t);return t.dom.redraw(),n}function a(e,t){return{key:e,pos:o.key2pos(e),piece:t}}t.anim=function(e,t){return t.animation.enabled?function(e,t){var n=new Map(t.pieces),i=e(t),l=function(e,t){var n,i,l,s=new Map,u=[],c=new Map,f=[],d=[],p=new Map,v=!0,h=!1,b=void 0;try{for(var g,m=e[Symbol.iterator]();!(v=(g=m.next()).done);v=!0){var y=r(g.value,2),w=y[0],P=y[1];p.set(w,a(w,P))}}catch(L){h=!0,b=L}finally{try{v||null==m.return||m.return()}finally{if(h)throw b}}var k=!0,C=!1,M=void 0;try{for(var E,S=o.allKeys[Symbol.iterator]();!(k=(E=S.next()).done);k=!0){var O=E.value;n=t.pieces.get(O),i=p.get(O),n?i?o.samePiece(n,i.piece)||(f.push(i),d.push(a(O,n))):d.push(a(O,n)):i&&f.push(i)}}catch(L){C=!0,M=L}finally{try{k||null==S.return||S.return()}finally{if(C)throw M}}for(var _=function(){var e,t,n=x[T];e=n,t=f.filter(function(e){return o.samePiece(n.piece,e.piece)}),(i=t.sort(function(t,n){return o.distanceSq(e.pos,t.pos)-o.distanceSq(e.pos,n.pos)})[0])&&(l=[i.pos[0]-n.pos[0],i.pos[1]-n.pos[1]],s.set(n.key,l.concat(l)),u.push(i.key))},T=0,x=d;T<x.length;T++)_();for(var A=0,j=f;A<j.length;A++){var D=j[A];u.includes(D.key)||c.set(D.key,D.piece)}return{anims:s,fadings:c}}(n,t);if(l.anims.size||l.fadings.size){var s=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:l},s||function e(t,n){var r=t.animation.current;if(void 0!==r){var o,i=1-(n-r.start)*r.frequency;if(i<=0)t.animation.current=void 0,t.dom.redrawNow();else{var a=(o=i)<.5?4*o*o*o:(o-1)*(2*o-2)*(2*o-2)+1,l=!0,s=!1,u=void 0;try{for(var c,f=r.plan.anims.values()[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var d=c.value;d[2]=d[0]*a,d[3]=d[1]*a}}catch(p){s=!0,u=p}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}t.dom.redrawNow(!0),requestAnimationFrame(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();return e(t,n)})}}else t.dom.destroyed||t.dom.redrawNow()}(t,performance.now())}else t.dom.redraw();return i}(e,t):i(e,t)},t.render=i},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configure=void 0;var r=n(95),o=n(109);function i(e){return"object"===typeof e}t.configure=function(e,t){var n;if((null===(n=t.movable)||void 0===n?void 0:n.dests)&&(e.movable.dests=void 0),function e(t,n){for(var r in n)i(t[r])&&i(n[r])?e(t[r],n[r]):t[r]=n[r]}(e,t),t.fen&&(e.pieces=o.read(t.fen),e.drawable.shapes=[]),t.hasOwnProperty("check")&&r.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&r.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){var a="white"===e.movable.color?"1":"8",l="e"+a,s=e.movable.dests.get(l),u=e.pieces.get(l);if(!s||!u||"king"!==u.role)return;e.movable.dests.set(l,s.filter(function(e){return!(e==="a"+a&&s.includes("c"+a))&&!(e==="h"+a&&s.includes("g"+a))}))}}},127:function(e,t,n){"use strict";var r=n(97);Object.defineProperty(t,"__esModule",{value:!0}),t.renderSvg=t.createElement=void 0;var o=n(81);function i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function a(e,t,n,r){var o,i=e.orig,a=e.dest,s=e.brush,u=e.piece,c=e.modifiers;return[r.width,r.height,n,i,a,s,a&&(t.get(a)||0)>1,u&&l(u),c&&(o=c,""+(o.lineWidth||""))].filter(function(e){return e}).join(",")}function l(e){return[e.color,e.role,e.scale].filter(function(e){return e}).join(",")}function s(e,t,n,r,a){var l,s=t.shape,u=t.current,b=t.hash;if(s.piece)l=function(e,t,n,r){var o=h(t,r),a=r.width/8*(n.scale||1),l=n.color[0]+("knight"===n.role?"n":n.role[0]).toUpperCase();return c(i("image"),{className:"".concat(n.role," ").concat(n.color),x:o[0]-a/2,y:o[1]-a/2,width:a,height:a,href:e+l+".svg"})}(e.drawable.pieces.baseUrl,f(o.key2pos(s.orig),e.orientation),s.piece,a);else{var g=f(o.key2pos(s.orig),e.orientation);if(s.dest){var m=n[s.brush];s.modifiers&&(m=d(m,s.modifiers)),l=function(e,t,n,r,o,a){var l=function(e,t){return(t?20:10)/512*e.width}(a,o&&!r),s=h(t,a),u=h(n,a),f=u[0]-s[0],d=u[1]-s[1],b=Math.atan2(d,f),g=Math.cos(b)*l,m=Math.sin(b)*l;return c(i("line"),{stroke:e.color,"stroke-width":p(e,r,a),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+e.key+")",opacity:v(e,r),x1:s[0],y1:s[1],x2:u[0]-g,y2:u[1]-m})}(m,g,f(o.key2pos(s.dest),e.orientation),u,(r.get(s.dest)||0)>1,a)}else l=function(e,t,n,r){var o=h(t,r),a=function(e){var t=e.width/512;return[3*t,4*t]}(r),l=(r.width+r.height)/32;return c(i("circle"),{stroke:e.color,"stroke-width":a[n?0:1],fill:"none",opacity:v(e,n),cx:o[0],cy:o[1],r:l-a[1]/2})}(n[s.brush],g,u,a)}return l.setAttribute("cgHash",b),l}function u(e){var t=c(i("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(c(i("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function c(e,t){for(var n in t)e.setAttribute(n,t[n]);return e}function f(e,t){return"white"===t?e:[7-e[0],7-e[1]]}function d(e,t){return{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(function(e){return e}).join("")}}function p(e,t,n){return(e.lineWidth||10)*(t?.85:1)/512*n.width}function v(e,t){return(e.opacity||1)*(t?.9:1)}function h(e,t){return[(e[0]+.5)*t.width/8,(7.5-e[1])*t.height/8]}t.createElement=i,t.renderSvg=function(e,t){var n=e.drawable,o=n.current,i=o&&o.mouseSq?o:void 0,l=new Map,c=e.dom.bounds(),f=!0,p=!1,v=void 0;try{for(var h,b=n.shapes.concat(n.autoShapes).concat(i?[i]:[])[Symbol.iterator]();!(f=(h=b.next()).done);f=!0){var g=h.value;g.dest&&l.set(g.dest,(l.get(g.dest)||0)+1)}}catch(P){p=!0,v=P}finally{try{f||null==b.return||b.return()}finally{if(p)throw v}}var m=n.shapes.concat(n.autoShapes).map(function(e){return{shape:e,current:!1,hash:a(e,l,!1,c)}});i&&m.push({shape:i,current:!0,hash:a(i,l,!0,c)});var y=m.map(function(e){return e.hash}).join(";");if(y!==e.drawable.prevSvgHash){e.drawable.prevSvgHash=y;var w=t.firstChild;!function(e,t,n){var o,i=new Map,a=!0,l=!1,s=void 0;try{for(var c,f=t[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var p=c.value;p.shape.dest&&(o=e.brushes[p.shape.brush],p.shape.modifiers&&(o=d(o,p.shape.modifiers)),i.set(o.key,o))}}catch(P){l=!0,s=P}finally{try{a||null==f.return||f.return()}finally{if(l)throw s}}for(var v=new Set,h=n.firstChild;h;)v.add(h.getAttribute("cgKey")),h=h.nextSibling;var b=!0,g=!1,m=void 0;try{for(var y,w=i.entries()[Symbol.iterator]();!(b=(y=w.next()).done);b=!0){var k=r(y.value,2),C=k[0],M=k[1];v.has(C)||n.appendChild(u(M))}}catch(P){g=!0,m=P}finally{try{b||null==w.return||w.return()}finally{if(g)throw m}}}(n,m,w),function(e,t,n,r,o,i){var a=e.dom.bounds(),l=new Map,u=[],c=!0,f=!1,d=void 0;try{for(var p,v=t[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var h=p.value;l.set(h.hash,!1)}}catch(P){f=!0,d=P}finally{try{c||null==v.return||v.return()}finally{if(f)throw d}}for(var b,g=i.nextSibling;g;)b=g.getAttribute("cgHash"),l.has(b)?l.set(b,!0):u.push(g),g=g.nextSibling;for(var m=0,y=u;m<y.length;m++){var w=y[m];o.removeChild(w)}var k=!0,C=!1,M=void 0;try{for(var E,S=t[Symbol.iterator]();!(k=(E=S.next()).done);k=!0){var O=E.value;l.get(O.hash)||o.appendChild(s(e,O,n,r,a))}}catch(P){C=!0,M=P}finally{try{k||null==S.return||S.return()}finally{if(C)throw M}}}(e,m,n.brushes,l,t,w)}}},140:function(e,t,n){"use strict";e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0,o=void 0,i=void 0,a=[];return function(){var l=function(e){return"function"===typeof e?e():e}(t),s=(new Date).getTime(),u=!r||s-r>l;r=s;for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];if(u&&n.leading)return n.accumulate?Promise.resolve(e.call(this,[f])).then(function(e){return e[0]}):Promise.resolve(e.call.apply(e,[this].concat(f)));if(o?clearTimeout(i):o=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}(),a.push(f),i=setTimeout(function(){var t=o;clearTimeout(i),Promise.resolve(n.accumulate?e.call(this,a):e.apply(this,a[a.length-1])).then(t.resolve,t.reject),a=[],o=null}.bind(this),l),n.accumulate){var p=a.length-1;return o.promise.then(function(e){return e[p]})}return o.promise}}},143:function(e,t,n){e.exports=n(144)},144:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(0),o=n.n(r),i=n(11),a=n.n(i),l=n(145);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.buildConfigFromProps=function(e){var t={events:{}};return Object.keys(r.propTypes).forEach(function(n){var r=e[n];if("undefined"!==typeof r){var o=n.match(/^on([A-Z]\S*)/);o?t.events[o[1].toLowerCase()]=r:t[n]=r}}),t},i.componentDidMount=function(){this.cg=Object(l.Chessground)(this.el,this.buildConfigFromProps(this.props))},i.componentWillReceiveProps=function(e){this.cg.set(this.buildConfigFromProps(e))},i.componentWillUnmount=function(){this.cg.destroy()},i.render=function(){var e=this,t={style:s({},this.props.style)};return this.props.width&&(t.style.width=this.props.width),this.props.height&&(t.style.height=this.props.height),o.a.createElement("div",s({ref:function(t){return e.el=t}},t))},r}(o.a.Component);u(c,"propTypes",{width:a.a.oneOfType([a.a.string,a.a.number]),height:a.a.oneOfType([a.a.string,a.a.number]),fen:a.a.string,orientation:a.a.string,turnColor:a.a.string,check:a.a.string,lastMove:a.a.array,selected:a.a.string,coordinates:a.a.bool,autoCastle:a.a.bool,viewOnly:a.a.bool,disableContextMenu:a.a.bool,resizable:a.a.bool,addPieceZIndex:a.a.bool,highlight:a.a.object,animation:a.a.object,movable:a.a.object,premovable:a.a.object,predroppable:a.a.object,draggable:a.a.object,selectable:a.a.object,onChange:a.a.func,onMove:a.a.func,onDropNewPiece:a.a.func,onSelect:a.a.func,items:a.a.object,drawable:a.a.object}),u(c,"defaultProps",{coordinates:!0,resizable:!0,highlight:{lastMove:!0,check:!0}})},145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chessground=void 0;var r=n(146),o=n(126),i=n(156),a=n(157),l=n(158),s=n(160),u=n(127),c=n(81);function f(e){var t=!1;return function(){t||(t=!0,requestAnimationFrame(function(){e(),t=!1}))}}t.Chessground=function(e,t){var n=i.defaults();function d(){var t=n.dom&&n.dom.unbind,r=n.viewOnly&&!n.drawable.visible,o=a.renderWrap(e,n,r),i=c.memo(function(){return o.board.getBoundingClientRect()}),d=function(e){s.render(n),!e&&o.svg&&u.renderSvg(n,o.svg)},p=function(){i.clear(),s.updateBounds(n),o.svg&&u.renderSvg(n,o.svg)};n.dom={elements:o,bounds:i,redraw:f(d),redrawNow:d,unbind:t,relative:r},n.drawable.prevSvgHash="",d(!1),l.bindBoard(n,p),t||(n.dom.unbind=l.bindDocument(n,p)),n.events.insert&&n.events.insert(o)}return o.configure(n,t||{}),d(),r.start(n,d)}},146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=void 0;var r=n(95),o=n(109),i=n(126),a=n(125),l=n(101),s=n(155);t.start=function(e,t){function n(){r.toggleOrientation(e),t()}return{set:function(t){t.orientation&&t.orientation!==e.orientation&&n(),(t.fen?a.anim:a.render)(function(e){return i.configure(e,t)},e)},state:e,getFen:function(){return o.write(e.pieces)},toggleOrientation:n,setPieces:function(t){a.anim(function(e){return r.setPieces(e,t)},e)},selectSquare:function(t,n){t?a.anim(function(e){return r.selectSquare(e,t,n)},e):e.selected&&(r.unselect(e),e.dom.redraw())},move:function(t,n){a.anim(function(e){return r.baseMove(e,t,n)},e)},newPiece:function(t,n){a.anim(function(e){return r.baseNewPiece(e,t,n)},e)},playPremove:function(){if(e.premovable.current){if(a.anim(r.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop:function(t){if(e.predroppable.current){var n=r.playPredrop(e,t);return e.dom.redraw(),n}return!1},cancelPremove:function(){a.render(r.unsetPremove,e)},cancelPredrop:function(){a.render(r.unsetPredrop,e)},cancelMove:function(){a.render(function(e){r.cancelMove(e),l.cancel(e)},e)},stop:function(){a.render(function(e){r.stop(e),l.cancel(e)},e)},explode:function(t){s.explosion(e,t)},setAutoShapes:function(t){a.render(function(e){return e.drawable.autoShapes=t},e)},setShapes:function(t){a.render(function(e){return e.drawable.shapes=t},e)},getKeyAtDomPos:function(t){return r.getKeyAtDomPos(t,r.whitePov(e),e.dom.bounds())},redrawAll:t,dragNewPiece:function(t,n,r){l.dragNewPiece(e,t,n,r)},destroy:function(){r.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},147:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},148:function(e,t){e.exports=function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}},149:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},150:function(e,t,n){var r=n(151),o=n(152),i=n(153);e.exports=function(e){return r(e)||o(e)||i()}},151:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},152:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},153:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},154:function(e,t,n){"use strict";var r=n(97);Object.defineProperty(t,"__esModule",{value:!0}),t.premove=t.queen=t.knight=void 0;var o=n(81);function i(e,t){return Math.abs(e-t)}t.knight=function(e,t,n,r){var o=i(e,n),a=i(t,r);return 1===o&&2===a||2===o&&1===a};var a=function(e,t,n,r){return i(e,n)===i(t,r)},l=function(e,t,n,r){return e===n||t===r};t.queen=function(e,t,n,r){return a(e,t,n,r)||l(e,t,n,r)},t.premove=function(e,n,s){var u=e.get(n);if(!u)return[];var c,f=o.key2pos(n),d=u.role,p="pawn"===d?(c=u.color,function(e,t,n,r){return i(e,n)<2&&("white"===c?r===t+1||t<=1&&r===t+2&&e===n:r===t-1||t>=6&&r===t-2&&e===n)}):"knight"===d?t.knight:"bishop"===d?a:"rook"===d?l:"queen"===d?t.queen:function(e,t,n){return function(r,o,a,l){return i(r,a)<2&&i(o,l)<2||n&&o===l&&o===("white"===e?0:7)&&(4===r&&(2===a&&t.includes(0)||6===a&&t.includes(7))||t.includes(a))}}(u.color,function(e,t){var n="white"===t?"1":"8",i=[],a=!0,l=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var f=r(u.value,2),d=f[0],p=f[1];d[1]===n&&p.color===t&&"rook"===p.role&&i.push(o.key2pos(d)[0])}}catch(v){l=!0,s=v}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}return i}(e,u.color),s);return o.allPos.filter(function(e){return(f[0]!==e[0]||f[1]!==e[1])&&p(f[0],f[1],e[0],e[1])}).map(o.pos2key)}},155:function(e,t,n){"use strict";function r(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(t,"__esModule",{value:!0}),t.explosion=void 0,t.explosion=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(function(){r(e,2),setTimeout(function(){return r(e,void 0)},120)},120)}},156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0;var r=n(109),o=n(81);t.defaults=function(){return{pieces:r.read(r.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:o.timer()}}},157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderWrap=void 0;var r=n(81),o=n(108),i=n(127);function a(e,t){var n,o=r.createEl("coords",t),i=!0,a=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;(n=r.createEl("coord")).textContent=c,o.appendChild(n)}}catch(f){a=!0,l=f}finally{try{i||null==u.return||u.return()}finally{if(a)throw l}}return o}t.renderWrap=function(e,t,n){e.innerHTML="",e.classList.add("cg-wrap");var l=!0,s=!1,u=void 0;try{for(var c,f=o.colors[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var d=c.value;e.classList.toggle("orientation-"+d,t.orientation===d)}}catch(y){s=!0,u=y}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}e.classList.toggle("manipulable",!t.viewOnly);var p=r.createEl("cg-helper");e.appendChild(p);var v=r.createEl("cg-container");p.appendChild(v);var h,b,g=r.createEl("cg-board");if(v.appendChild(g),t.drawable.visible&&!n&&((h=i.createElement("svg")).appendChild(i.createElement("defs")),v.appendChild(h)),t.coordinates){var m="black"===t.orientation?" black":"";v.appendChild(a(o.ranks,"ranks"+m)),v.appendChild(a(o.files,"files"+m))}return t.draggable.showGhost&&!n&&(b=r.createEl("piece","ghost"),r.setVisible(b,!1),v.appendChild(b)),{board:g,container:v,ghost:b,svg:h}}},158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindDocument=t.bindBoard=void 0;var r=n(101),o=n(124),i=n(159),a=n(81);function l(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function s(e,t,n){return function(r){e.drawable.current?e.drawable.enabled&&n(e,r):e.viewOnly||t(e,r)}}t.bindBoard=function(e,t){var n=e.dom.elements.board;if(!e.dom.relative&&e.resizable&&"ResizeObserver"in window&&new window.ResizeObserver(t).observe(n),!e.viewOnly){var l=function(e){return function(t){e.draggable.current?r.cancel(e):e.drawable.current?o.cancel(e):t.shiftKey||a.isRightButton(t)?e.drawable.enabled&&o.start(e,t):e.viewOnly||(e.dropmode.active?i.drop(e,t):r.start(e,t))}}(e);n.addEventListener("touchstart",l,{passive:!1}),n.addEventListener("mousedown",l,{passive:!1}),(e.disableContextMenu||e.drawable.enabled)&&n.addEventListener("contextmenu",function(e){return e.preventDefault()})}},t.bindDocument=function(e,t){var n=[];if(e.dom.relative||!e.resizable||"ResizeObserver"in window||n.push(l(document.body,"chessground.resize",t)),!e.viewOnly){for(var i=s(e,r.move,o.move),a=s(e,r.end,o.end),u=0,c=["touchmove","mousemove"];u<c.length;u++){var f=c[u];n.push(l(document,f,i))}for(var d=0,p=["touchend","mouseup"];d<p.length;d++){var v=p[d];n.push(l(document,v,a))}var h=function(){return e.dom.bounds.clear()};n.push(l(document,"scroll",h,{capture:!0,passive:!0})),n.push(l(window,"resize",h,{passive:!0}))}return function(){return n.forEach(function(e){return e()})}}},159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drop=t.cancelDropMode=t.setDropMode=void 0;var r=n(95),o=n(81),i=n(101);t.setDropMode=function(e,t){e.dropmode={active:!0,piece:t},i.cancel(e)},t.cancelDropMode=function(e){e.dropmode={active:!1}},t.drop=function(e,t){if(e.dropmode.active){r.unsetPremove(e),r.unsetPredrop(e);var n=e.dropmode.piece;if(n){e.pieces.set("a0",n);var i=o.eventPosition(t),a=i&&r.getKeyAtDomPos(i,r.whitePov(e),e.dom.bounds());a&&r.dropNewPiece(e,"a0",a)}e.dom.redraw()}}},160:function(e,t,n){"use strict";var r=n(97);Object.defineProperty(t,"__esModule",{value:!0}),t.updateBounds=t.render=void 0;var o=n(81),i=n(95),a=n(81);function l(e){return"PIECE"===e.tagName}function s(e){return"SQUARE"===e.tagName}function u(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;e.dom.elements.board.removeChild(l)}}catch(s){r=!0,o=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}function c(e,t){var n=2+8*e[1]+(7-e[0]);return t&&(n=67-n),n+""}function f(e){return"".concat(e.color," ").concat(e.role)}function d(e,t,n){var r=e.get(t);r?e.set(t,"".concat(r," ").concat(n)):e.set(t,n)}function p(e,t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])}t.render=function(e){var t,n,v,h,b,g,m,y,w,P,k=i.whitePov(e),C=e.dom.relative?a.posToTranslateRel:a.posToTranslateAbs(e.dom.bounds()),M=e.dom.relative?a.translateRel:a.translateAbs,E=e.dom.elements.board,S=e.pieces,O=e.animation.current,_=O?O.plan.anims:new Map,T=O?O.plan.fadings:new Map,x=e.draggable.current,A=function(e){var t,n=new Map;if(e.lastMove&&e.highlight.lastMove){var r=!0,o=!1,i=void 0;try{for(var a,l=e.lastMove[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;d(n,s,"last-move")}}catch(K){o=!0,i=K}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}if(e.check&&e.highlight.check&&d(n,e.check,"check"),e.selected&&(d(n,e.selected,"selected"),e.movable.showDests)){var u=null===(t=e.movable.dests)||void 0===t?void 0:t.get(e.selected);if(u){var c=!0,f=!1,p=void 0;try{for(var v,h=u[Symbol.iterator]();!(c=(v=h.next()).done);c=!0){var b=v.value;d(n,b,"move-dest"+(e.pieces.has(b)?" oc":""))}}catch(K){f=!0,p=K}finally{try{c||null==h.return||h.return()}finally{if(f)throw p}}}var g=e.premovable.dests;if(g){var m=!0,y=!1,w=void 0;try{for(var P,k=g[Symbol.iterator]();!(m=(P=k.next()).done);m=!0){var C=P.value;d(n,C,"premove-dest"+(e.pieces.has(C)?" oc":""))}}catch(K){y=!0,w=K}finally{try{m||null==k.return||k.return()}finally{if(y)throw w}}}}var M=e.premovable.current;if(M){var E=!0,S=!1,O=void 0;try{for(var _,T=M[Symbol.iterator]();!(E=(_=T.next()).done);E=!0){var x=_.value;d(n,x,"current-premove")}}catch(K){S=!0,O=K}finally{try{E||null==T.return||T.return()}finally{if(S)throw O}}}else e.predroppable.current&&d(n,e.predroppable.current.key,"current-premove");var A=e.exploding;if(A){var j=!0,D=!1,L=void 0;try{for(var I,R=A.keys[Symbol.iterator]();!(j=(I=R.next()).done);j=!0){var N=I.value;d(n,N,"exploding"+A.stage)}}catch(K){D=!0,L=K}finally{try{j||null==R.return||R.return()}finally{if(D)throw L}}}return n}(e),j=new Set,D=new Set,L=new Map,I=new Map;for(n=E.firstChild;n;){if(t=n.cgKey,l(n))if(v=S.get(t),b=_.get(t),g=T.get(t),h=n.cgPiece,!n.cgDragging||x&&x.orig===t||(n.classList.remove("dragging"),M(n,C(o.key2pos(t),k)),n.cgDragging=!1),!g&&n.cgFading&&(n.cgFading=!1,n.classList.remove("fading")),v){if(b&&n.cgAnimating&&h===f(v)){var R=o.key2pos(t);R[0]+=b[2],R[1]+=b[3],n.classList.add("anim"),M(n,C(R,k))}else n.cgAnimating&&(n.cgAnimating=!1,n.classList.remove("anim"),M(n,C(o.key2pos(t),k)),e.addPieceZIndex&&(n.style.zIndex=c(o.key2pos(t),k)));h!==f(v)||g&&n.cgFading?g&&h===f(g)?(n.classList.add("fading"),n.cgFading=!0):p(L,h,n):j.add(t)}else p(L,h,n);else if(s(n)){var N=n.className;A.get(t)===N?D.add(t):p(I,N,n)}n=n.nextSibling}var K=!0,q=!1,H=void 0;try{for(var U,B=A[Symbol.iterator]();!(K=(U=B.next()).done);K=!0){var W=r(U.value,2),F=W[0],Q=W[1];if(!D.has(F)){P=(w=I.get(Q))&&w.pop();var V=C(o.key2pos(F),k);if(P)P.cgKey=F,M(P,V);else{var z=o.createEl("square",Q);z.cgKey=F,M(z,V),E.insertBefore(z,E.firstChild)}}}}catch(be){q=!0,H=be}finally{try{K||null==B.return||B.return()}finally{if(q)throw H}}var X=!0,$=!1,G=void 0;try{for(var Z,Y=S[Symbol.iterator]();!(X=(Z=Y.next()).done);X=!0){var J=r(Z.value,2),ee=J[0],te=J[1];if(b=_.get(ee),!j.has(ee))if(y=(m=L.get(f(te)))&&m.pop()){y.cgKey=ee,y.cgFading&&(y.classList.remove("fading"),y.cgFading=!1);var ne=o.key2pos(ee);e.addPieceZIndex&&(y.style.zIndex=c(ne,k)),b&&(y.cgAnimating=!0,y.classList.add("anim"),ne[0]+=b[2],ne[1]+=b[3]),M(y,C(ne,k))}else{var re=f(te),oe=o.createEl("piece",re),ie=o.key2pos(ee);oe.cgPiece=re,oe.cgKey=ee,b&&(oe.cgAnimating=!0,ie[0]+=b[2],ie[1]+=b[3]),M(oe,C(ie,k)),e.addPieceZIndex&&(oe.style.zIndex=c(ie,k)),E.appendChild(oe)}}}catch(be){$=!0,G=be}finally{try{X||null==Y.return||Y.return()}finally{if($)throw G}}var ae=!0,le=!1,se=void 0;try{for(var ue,ce=L.values()[Symbol.iterator]();!(ae=(ue=ce.next()).done);ae=!0)u(e,ue.value)}catch(be){le=!0,se=be}finally{try{ae||null==ce.return||ce.return()}finally{if(le)throw se}}var fe=!0,de=!1,pe=void 0;try{for(var ve,he=I.values()[Symbol.iterator]();!(fe=(ve=he.next()).done);fe=!0)u(e,ve.value)}catch(be){de=!0,pe=be}finally{try{fe||null==he.return||he.return()}finally{if(de)throw pe}}},t.updateBounds=function(e){if(!e.dom.relative)for(var t=i.whitePov(e),n=a.posToTranslateAbs(e.dom.bounds()),r=e.dom.elements.board.firstChild;r;)(l(r)&&!r.cgAnimating||s(r))&&a.translateAbs(r,n(o.key2pos(r.cgKey),t)),r=r.nextSibling}},161:function(e,t,n){},191:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(11),a=n.n(i),l=n(100),s=n.n(l),u=n(31),c=n.n(u);function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"===typeof e&&e.apply(void 0,n)}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var p="react-contextmenu",v="react-contextmenu--visible",h="react-contextmenu-wrapper",b="react-contextmenu-item",g="react-contextmenu-item--active",m="react-contextmenu-item--disabled",y="react-contextmenu-item--divider",w="react-contextmenu-item--selected",P="react-contextmenu-submenu",k={},C=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),M="REACT_CONTEXTMENU_SHOW",E="REACT_CONTEXTMENU_HIDE";function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=void 0;"function"===typeof window.CustomEvent?r=new window.CustomEvent(e,{detail:t}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!0,t),n&&(n.dispatchEvent(r),c()(k,t))}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];S(M,c()({},e,{type:M}),t)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];S(E,c()({},e,{type:E}),t)}var T=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleShowEvent=function(e){for(var n in t.callbacks)d(t.callbacks,n)&&t.callbacks[n].show(e)},this.handleHideEvent=function(e){for(var n in t.callbacks)d(t.callbacks,n)&&t.callbacks[n].hide(e)},this.register=function(e,n){var r=Math.random().toString(36).substring(7);return t.callbacks[r]={show:e,hide:n},r},this.unregister=function(e){e&&t.callbacks[e]&&delete t.callbacks[e]},this.callbacks={},C&&(window.addEventListener(M,this.handleShowEvent),window.addEventListener(E,this.handleHideEvent))},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var L=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=D(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleClick=function(e){0!==e.button&&1!==e.button&&e.preventDefault(),r.props.disabled||r.props.divider||(f(r.props.onClick,e,c()({},r.props.data,k.data),k.target),r.props.preventClose||_())},D(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),A(t,[{key:"render",value:function(){var e,t=this,n=this.props,r=n.disabled,i=n.divider,a=n.children,l=n.attributes,u=n.selected,c=s()(b,l.className,(j(e={},s()(m,l.disabledClassName),r),j(e,s()(y,l.dividerClassName),i),j(e,s()(w,l.selectedClassName),u),e));return o.a.createElement("div",x({},l,{className:c,role:"menuitem",tabIndex:"-1","aria-disabled":r?"true":"false","aria-orientation":i?"horizontal":null,ref:function(e){t.ref=e},onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,onTouchEnd:this.handleClick,onClick:this.handleClick}),i?null:a)}}]),t}();L.propTypes={children:a.a.node,attributes:a.a.object,data:a.a.object,disabled:a.a.bool,divider:a.a.bool,preventClose:a.a.bool,onClick:a.a.func,selected:a.a.bool,onMouseMove:a.a.func,onMouseLeave:a.a.func},L.defaultProps={disabled:!1,data:{},divider:!1,attributes:{},preventClose:!1,onClick:function(){return null},children:null,selected:!1,onMouseMove:function(){return null},onMouseLeave:function(){return null}};var I=L;var R=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return N.call(n),n.seletedItemRef=null,n.state={selectedItem:null,forceSubMenuOpen:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),t}();R.propTypes={children:a.a.node.isRequired};var N=function(){var e=this;this.handleKeyNavigation=function(t){if(!1!==e.state.isVisible)switch(t.keyCode){case 37:case 27:t.preventDefault(),e.hideMenu(t);break;case 38:t.preventDefault(),e.selectChildren(!0);break;case 40:t.preventDefault(),e.selectChildren(!1);break;case 39:e.tryToOpenSubMenu(t);break;case 13:t.preventDefault(),e.tryToOpenSubMenu(t);var n=e.seletedItemRef&&e.seletedItemRef.props&&e.seletedItemRef.props.disabled;e.seletedItemRef&&e.seletedItemRef.ref instanceof HTMLElement&&!n?e.seletedItemRef.ref.click():e.hideMenu(t)}},this.handleForceClose=function(){e.setState({forceSubMenuOpen:!1})},this.tryToOpenSubMenu=function(t){e.state.selectedItem&&e.state.selectedItem.type===e.getSubMenuType()&&(t.preventDefault(),e.setState({forceSubMenuOpen:!0}))},this.selectChildren=function(t){var n=e.state.selectedItem,r=[],i=0,a={};if(o.a.Children.forEach(e.props.children,function t(n,l){n&&([I,e.getSubMenuType()].indexOf(n.type)<0?o.a.Children.forEach(n.props.children,t):n.props.divider||(n.props.disabled&&(++i,a[l]=!0),r.push(n)))}),i!==r.length){var l=function(e){var n=e;do{t?--n:++n,n<0?n=r.length-1:n>=r.length&&(n=0)}while(n!==e&&a[n]);return n===e?null:n}(r.indexOf(n));null!==l&&e.setState({selectedItem:r[l],forceSubMenuOpen:!1})}},this.onChildMouseMove=function(t){e.state.selectedItem!==t&&e.setState({selectedItem:t,forceSubMenuOpen:!1})},this.onChildMouseLeave=function(){e.setState({selectedItem:null,forceSubMenuOpen:!1})},this.renderChildren=function(t){return o.a.Children.map(t,function(t){var n={};return o.a.isValidElement(t)?[I,e.getSubMenuType()].indexOf(t.type)<0?(n.children=e.renderChildren(t.props.children),o.a.cloneElement(t,n)):(n.onMouseLeave=e.onChildMouseLeave.bind(e),t.type===e.getSubMenuType()&&(n.forceOpen=e.state.forceSubMenuOpen&&e.state.selectedItem===t,n.forceClose=e.handleForceClose,n.parentKeyNavigationHandler=e.handleKeyNavigation),t.props.divider||e.state.selectedItem!==t?(n.onMouseMove=function(){return e.onChildMouseMove(t)},o.a.cloneElement(t,n)):(n.selected=!0,n.ref=function(t){e.seletedItemRef=t},o.a.cloneElement(t,n))):t})}},K=R,q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getMenuPosition=function(){var e=window,t=e.innerWidth,r=e.innerHeight,o=n.subMenu.getBoundingClientRect(),i={};return o.bottom>r?i.bottom=0:i.top=0,o.right<t?i.left="100%":i.right="100%",i},n.getRTLMenuPosition=function(){var e=window.innerHeight,t=n.subMenu.getBoundingClientRect(),r={};return t.bottom>e?r.bottom=0:r.top=0,t.left<0?r.left="100%":r.right="100%",r},n.hideMenu=function(e){e.detail&&e.detail.id&&n.menu&&e.detail.id!==n.menu.id||(n.props.forceOpen&&n.props.forceClose(),n.setState({visible:!1,selectedItem:null}),n.unregisterHandlers())},n.handleClick=function(e){e.preventDefault(),n.props.disabled||f(n.props.onClick,e,c()({},n.props.data,k.data),k.target)},n.handleMouseEnter=function(){n.closetimer&&clearTimeout(n.closetimer),n.props.disabled||n.state.visible||(n.opentimer=setTimeout(function(){return n.setState({visible:!0,selectedItem:null})},n.props.hoverDelay))},n.handleMouseLeave=function(){n.opentimer&&clearTimeout(n.opentimer),n.state.visible&&(n.closetimer=setTimeout(function(){return n.setState({visible:!1,selectedItem:null})},n.props.hoverDelay))},n.menuRef=function(e){n.menu=e},n.subMenuRef=function(e){n.subMenu=e},n.registerHandlers=function(){document.removeEventListener("keydown",n.props.parentKeyNavigationHandler),document.addEventListener("keydown",n.handleKeyNavigation)},n.unregisterHandlers=function(e){document.removeEventListener("keydown",n.handleKeyNavigation),e||document.addEventListener("keydown",n.props.parentKeyNavigationHandler)},n.state=c()({},n.state,{visible:!1}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,K),H(t,[{key:"componentDidMount",value:function(){this.listenId=T.register(function(){},this.hideMenu)}},{key:"getSubMenuType",value:function(){return t}},{key:"shouldComponentUpdate",value:function(e,t){return this.isVisibilityChange=(this.state.visible!==t.visible||this.props.forceOpen!==e.forceOpen)&&!(this.state.visible&&e.forceOpen)&&!(this.props.forceOpen&&t.visible),!0}},{key:"componentDidUpdate",value:function(){var e=this;if(this.isVisibilityChange)if(this.props.forceOpen||this.state.visible){(window.requestAnimationFrame||setTimeout)(function(){var t=e.props.rtl?e.getRTLMenuPosition():e.getMenuPosition();e.subMenu.style.removeProperty("top"),e.subMenu.style.removeProperty("bottom"),e.subMenu.style.removeProperty("left"),e.subMenu.style.removeProperty("right"),d(t,"top")&&(e.subMenu.style.top=t.top),d(t,"left")&&(e.subMenu.style.left=t.left),d(t,"bottom")&&(e.subMenu.style.bottom=t.bottom),d(t,"right")&&(e.subMenu.style.right=t.right),e.subMenu.classList.add(v),e.registerHandlers(),e.setState({selectedItem:null})})}else{this.subMenu.addEventListener("transitionend",function t(){e.subMenu.removeEventListener("transitionend",t),e.subMenu.style.removeProperty("bottom"),e.subMenu.style.removeProperty("right"),e.subMenu.style.top=0,e.subMenu.style.left="100%",e.unregisterHandlers()}),this.subMenu.classList.remove(v)}}},{key:"componentWillUnmount",value:function(){this.listenId&&T.unregister(this.listenId),this.opentimer&&clearTimeout(this.opentimer),this.closetimer&&clearTimeout(this.closetimer),this.unregisterHandlers(!0)}},{key:"render",value:function(){var e,t=this.props,n=t.children,r=t.attributes,i=t.disabled,a=t.title,l=t.selected,u=this.state.visible,c={ref:this.menuRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:s()(b,P,r.listClassName),style:{position:"relative"}},f={className:s()(b,r.className,(e={},U(e,s()(m,r.disabledClassName),i),U(e,s()(g,r.visibleClassName),u),U(e,s()(w,r.selectedClassName),l),e)),onMouseMove:this.props.onMouseMove,onMouseOut:this.props.onMouseOut,onClick:this.handleClick},d={ref:this.subMenuRef,style:{position:"absolute",transition:"opacity 1ms",top:0,left:"100%"},className:s()(p,this.props.className)};return o.a.createElement("nav",q({},c,{role:"menuitem",tabIndex:"-1","aria-haspopup":"true"}),o.a.createElement("div",q({},r,f),a),o.a.createElement("nav",q({},d,{role:"menu",tabIndex:"-1"}),this.renderChildren(n)))}}]),t}();B.propTypes={children:a.a.node.isRequired,attributes:a.a.object,title:a.a.node.isRequired,className:a.a.string,disabled:a.a.bool,hoverDelay:a.a.number,rtl:a.a.bool,selected:a.a.bool,onMouseMove:a.a.func,onMouseOut:a.a.func,forceOpen:a.a.bool,forceClose:a.a.func,parentKeyNavigationHandler:a.a.func},B.defaultProps={disabled:!1,hoverDelay:500,attributes:{},className:"",rtl:!1,selected:!1,onMouseMove:function(){return null},onMouseOut:function(){return null},forceOpen:!1,forceClose:function(){return null},parentKeyNavigationHandler:function(){return null}};var W=B,F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Q=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.registerHandlers=function(){document.addEventListener("mousedown",n.handleOutsideClick),document.addEventListener("touchstart",n.handleOutsideClick),document.addEventListener("scroll",n.handleHide),document.addEventListener("contextmenu",n.handleHide),document.addEventListener("keydown",n.handleKeyNavigation),window.addEventListener("resize",n.handleHide)},n.unregisterHandlers=function(){document.removeEventListener("mousedown",n.handleOutsideClick),document.removeEventListener("touchstart",n.handleOutsideClick),document.removeEventListener("scroll",n.handleHide),document.removeEventListener("contextmenu",n.handleHide),document.removeEventListener("keydown",n.handleKeyNavigation),window.removeEventListener("resize",n.handleHide)},n.handleShow=function(e){if(e.detail.id===n.props.id&&!n.state.isVisible){var t=e.detail.position,r=t.x,o=t.y;n.setState({isVisible:!0,x:r,y:o}),n.registerHandlers(),f(n.props.onShow,e)}},n.handleHide=function(e){!n.state.isVisible||e.detail&&e.detail.id&&e.detail.id!==n.props.id||(n.unregisterHandlers(),n.setState({isVisible:!1,selectedItem:null,forceSubMenuOpen:!1}),f(n.props.onHide,e))},n.handleOutsideClick=function(e){n.menu.contains(e.target)||_()},n.handleMouseLeave=function(e){e.preventDefault(),f(n.props.onMouseLeave,e,c()({},n.props.data,k.data),k.target),n.props.hideOnLeave&&_()},n.handleContextMenu=function(e){e.preventDefault(),n.handleHide(e)},n.hideMenu=function(e){27!==e.keyCode&&13!==e.keyCode||_()},n.getMenuPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={top:t,left:e};if(!n.menu)return r;var o=window,i=o.innerWidth,a=o.innerHeight,l=n.menu.getBoundingClientRect();return t+l.height>a&&(r.top-=l.height),e+l.width>i&&(r.left-=l.width),r.top<0&&(r.top=l.height<a?(a-l.height)/2:0),r.left<0&&(r.left=l.width<i?(i-l.width)/2:0),r},n.getRTLMenuPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={top:t,left:e};if(!n.menu)return r;var o=window,i=o.innerWidth,a=o.innerHeight,l=n.menu.getBoundingClientRect();return r.left=e-l.width,t+l.height>a&&(r.top-=l.height),r.left<0&&(r.left+=l.width),r.top<0&&(r.top=l.height<a?(a-l.height)/2:0),r.left+l.width>i&&(r.left=l.width<i?(i-l.width)/2:0),r},n.menuRef=function(e){n.menu=e},n.state=c()({},n.state,{x:0,y:0,isVisible:!1}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,K),F(t,[{key:"getSubMenuType",value:function(){return W}},{key:"componentDidMount",value:function(){this.listenId=T.register(this.handleShow,this.handleHide)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.isVisible){var t=window.requestAnimationFrame||setTimeout;t(function(){var n=e.state,r=n.x,o=n.y,i=e.props.rtl?e.getRTLMenuPosition(r,o):e.getMenuPosition(r,o),a=i.top,l=i.left;t(function(){e.menu&&(e.menu.style.top=a+"px",e.menu.style.left=l+"px",e.menu.style.opacity=1,e.menu.style.pointerEvents="auto")})})}else{if(!this.menu)return;this.menu.style.opacity=0,this.menu.style.pointerEvents="none"}}},{key:"componentWillUnmount",value:function(){this.listenId&&T.unregister(this.listenId),this.unregisterHandlers()}},{key:"render",value:function(){var e,t,n,r=this.props,i=r.children,a=r.className,l=r.style,u=this.state.isVisible,f=c()({},l,{position:"fixed",opacity:0,pointerEvents:"none"}),d=s()(p,a,(n=u,(t=v)in(e={})?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e));return o.a.createElement("nav",{role:"menu",tabIndex:"-1",ref:this.menuRef,style:f,className:d,onContextMenu:this.handleContextMenu,onMouseLeave:this.handleMouseLeave},this.renderChildren(i))}}]),t}();Q.propTypes={id:a.a.string.isRequired,children:a.a.node.isRequired,data:a.a.object,className:a.a.string,hideOnLeave:a.a.bool,rtl:a.a.bool,onHide:a.a.func,onMouseLeave:a.a.func,onShow:a.a.func,style:a.a.object},Q.defaultProps={className:"",data:{},hideOnLeave:!1,rtl:!1,onHide:function(){return null},onMouseLeave:function(){return null},onShow:function(){return null},style:{}};var V=Q,z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function X(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var $=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=r=X(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.touchHandled=!1,r.handleMouseDown=function(e){r.props.holdToDisplay>=0&&0===e.button&&(e.persist(),e.stopPropagation(),r.mouseDownTimeoutId=setTimeout(function(){return r.handleContextClick(e)},r.props.holdToDisplay)),f(r.props.attributes.onMouseDown,e)},r.handleMouseUp=function(e){0===e.button&&clearTimeout(r.mouseDownTimeoutId),f(r.props.attributes.onMouseUp,e)},r.handleMouseOut=function(e){0===e.button&&clearTimeout(r.mouseDownTimeoutId),f(r.props.attributes.onMouseOut,e)},r.handleTouchstart=function(e){r.touchHandled=!1,r.props.holdToDisplay>=0&&(e.persist(),e.stopPropagation(),r.touchstartTimeoutId=setTimeout(function(){r.handleContextClick(e),r.touchHandled=!0},r.props.holdToDisplay)),f(r.props.attributes.onTouchStart,e)},r.handleTouchEnd=function(e){r.touchHandled&&e.preventDefault(),clearTimeout(r.touchstartTimeoutId),f(r.props.attributes.onTouchEnd,e)},r.handleContextMenu=function(e){r.handleContextClick(e),f(r.props.attributes.onContextMenu,e)},r.handleContextClick=function(e){if(!r.props.disable&&(!r.props.disableIfShiftIsPressed||!e.shiftKey)){e.preventDefault(),e.stopPropagation();var t=e.clientX||e.touches&&e.touches[0].pageX,n=e.clientY||e.touches&&e.touches[0].pageY;r.props.posX&&(t-=r.props.posX),r.props.posY&&(n-=r.props.posY),_();var o=f(r.props.collect,r.props),i={position:{x:t,y:n},target:r.elem,id:r.props.id};o&&"function"===typeof o.then?o.then(function(t){i.data=c()({},t,{target:e.target}),O(i)}):(i.data=c()({},o,{target:e.target}),O(i))}},r.elemRef=function(e){r.elem=e},X(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),z(t,[{key:"render",value:function(){var e=this.props,t=e.renderTag,n=e.attributes,r=e.children,i=c()({},n,{className:s()(h,n.className),onContextMenu:this.handleContextMenu,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchstart,onTouchEnd:this.handleTouchEnd,onMouseOut:this.handleMouseOut,ref:this.elemRef});return o.a.createElement(t,i,r)}}]),t}();$.propTypes={id:a.a.string.isRequired,children:a.a.node.isRequired,attributes:a.a.object,collect:a.a.func,disable:a.a.bool,holdToDisplay:a.a.number,posX:a.a.number,posY:a.a.number,renderTag:a.a.oneOfType([a.a.node,a.a.func]),disableIfShiftIsPressed:a.a.bool},$.defaultProps={attributes:{},collect:function(){return null},disable:!1,holdToDisplay:1e3,renderTag:"div",posX:0,posY:0,disableIfShiftIsPressed:!1};var G=$,Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var J=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(G.propTypes)),["children"]),ee=function(e){return function(t){return function(n){function i(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.handleShow=function(t){if(t.detail.id===e){var r=t.detail.data,o={};for(var i in r)J.includes(i)||(o[i]=r[i]);n.setState({trigger:o})}},n.handleHide=function(){n.setState({trigger:null})},n.state={trigger:null},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r["Component"]),Y(i,[{key:"componentDidMount",value:function(){this.listenId=T.register(this.handleShow,this.handleHide)}},{key:"componentWillUnmount",value:function(){this.listenId&&T.unregister(this.listenId)}},{key:"render",value:function(){return o.a.createElement(t,Z({},this.props,{id:e,trigger:this.state.trigger}))}}]),i}()}};n.d(t,"a",function(){return V}),n.d(t,"b",function(){return G}),n.d(t,"c",function(){return I}),n.d(t,"d",function(){return ee})},192:function(e,t,n){"use strict";var r=n(140),o=n.n(r);function i(e){var t=null;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t&&t();var o=function(e){var t=null,n=null,r=new Promise(function(e,r){t=e,n=r});return e&&e.then(function(e){t&&t(e)},function(e){n&&n(e)}),{promise:r,resolve:function(e){t&&t(e)},reject:function(e){n&&n(e)},cancel:function(){t=null,n=null}}}(e.apply(void 0,n)),i=o.promise,a=o.cancel;return t=a,i}}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l={key:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return null},onlyResolvesLast:!0},s=function(){function e(e){this.config=e,this.debounceSingleton=null,this.debounceCache={}}return e.prototype._createDebouncedFunction=function(){var e=o()(this.config.func,this.config.wait,this.config.options);return this.config.options.onlyResolvesLast&&(e=i(e)),{func:e}},e.prototype.getDebouncedFunction=function(e){var t,n=(t=this.config.options).key.apply(t,e);return null===n||"undefined"===typeof n?(this.debounceSingleton||(this.debounceSingleton=this._createDebouncedFunction()),this.debounceSingleton):(this.debounceCache[n]||(this.debounceCache[n]=this._createDebouncedFunction()),this.debounceCache[n])},e}();t.a=function(e,t,n){var r=a({},l,n),o=new s({func:e,wait:t,options:r});return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.getDebouncedFunction(e).func.apply(void 0,e)}}},81:function(e,t,n){"use strict";var r,o=n(150);Object.defineProperty(t,"__esModule",{value:!0}),t.createEl=t.isRightButton=t.eventPosition=t.setVisible=t.translateRel=t.translateAbs=t.posToTranslateRel=t.posToTranslateAbs=t.samePiece=t.distanceSq=t.opposite=t.timer=t.memo=t.allPos=t.key2pos=t.pos2key=t.allKeys=t.invRanks=void 0;var i=n(108);t.invRanks=["8","7","6","5","4","3","2","1"],t.allKeys=(r=Array.prototype).concat.apply(r,o(i.files.map(function(e){return i.ranks.map(function(t){return e+t})}))),t.pos2key=function(e){return t.allKeys[8*e[0]+e[1]]},t.key2pos=function(e){return[e.charCodeAt(0)-97,e.charCodeAt(1)-49]},t.allPos=t.allKeys.map(t.key2pos),t.memo=function(e){var t,n=function(){return void 0===t&&(t=e()),t};return n.clear=function(){t=void 0},n},t.timer=function(){var e;return{start:function(){e=performance.now()},cancel:function(){e=void 0},stop:function(){if(!e)return 0;var t=performance.now()-e;return e=void 0,t}}},t.opposite=function(e){return"white"===e?"black":"white"},t.distanceSq=function(e,t){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},t.samePiece=function(e,t){return e.role===t.role&&e.color===t.color};var a=function(e,t,n,r){return[(t?e[0]:7-e[0])*n,(t?7-e[1]:e[1])*r]};t.posToTranslateAbs=function(e){var t=e.width/8,n=e.height/8;return function(e,r){return a(e,r,t,n)}},t.posToTranslateRel=function(e,t){return a(e,t,100,100)},t.translateAbs=function(e,t){e.style.transform="translate(".concat(t[0],"px,").concat(t[1],"px)")},t.translateRel=function(e,t){e.style.transform="translate(".concat(t[0],"%,").concat(t[1],"%)")},t.setVisible=function(e,t){e.style.visibility=t?"visible":"hidden"},t.eventPosition=function(e){return e.clientX||0===e.clientX?[e.clientX,e.clientY]:e.touches&&e.targetTouches[0]?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},t.isRightButton=function(e){return 2===e.buttons||2===e.button},t.createEl=function(e,t){var n=document.createElement(e);return t&&(n.className=t),n}},95:function(e,t,n){"use strict";var r=n(97);Object.defineProperty(t,"__esModule",{value:!0}),t.whitePov=t.getSnappedKeyAtDomPos=t.getKeyAtDomPos=t.stop=t.cancelMove=t.playPredrop=t.playPremove=t.isDraggable=t.canMove=t.unselect=t.setSelected=t.selectSquare=t.dropNewPiece=t.userMove=t.baseNewPiece=t.baseMove=t.unsetPredrop=t.unsetPremove=t.setCheck=t.setPieces=t.reset=t.toggleOrientation=t.callUserFunction=void 0;var o=n(81),i=n(154),a=n(101);function l(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&setTimeout(function(){return e.apply(void 0,n)},1)}function s(e){e.premovable.current&&(e.premovable.current=void 0,l(e.premovable.events.unset))}function u(e){var t=e.predroppable;t.current&&(t.current=void 0,l(t.events.unset))}function c(e,t,n){var r=e.pieces.get(t),i=e.pieces.get(n);if(t===n||!r)return!1;var a=i&&i.color!==r.color?i:void 0;return n===e.selected&&h(e),l(e.events.move,t,n,a),function(e,t,n){if(!e.autoCastle)return!1;var r=e.pieces.get(t);if(!r||"king"!==r.role)return!1;var i=o.key2pos(t),a=o.key2pos(n);if(0!==i[1]&&7!==i[1]||i[1]!==a[1])return!1;4!==i[0]||e.pieces.has(n)||(6===a[0]?n=o.pos2key([7,a[1]]):2===a[0]&&(n=o.pos2key([0,a[1]])));var l=e.pieces.get(n);return!(!l||l.color!==r.color||"rook"!==l.role)&&(e.pieces.delete(t),e.pieces.delete(n),i[0]<a[0]?(e.pieces.set(o.pos2key([6,a[1]]),r),e.pieces.set(o.pos2key([5,a[1]]),l)):(e.pieces.set(o.pos2key([2,a[1]]),r),e.pieces.set(o.pos2key([3,a[1]]),l)),!0)}(e,t,n)||(e.pieces.set(n,r),e.pieces.delete(t)),e.lastMove=[t,n],e.check=void 0,l(e.events.change),a||!0}function f(e,t,n,r){if(e.pieces.has(n)){if(!r)return!1;e.pieces.delete(n)}return l(e.events.dropNewPiece,t,n),e.pieces.set(n,t),e.lastMove=[n],e.check=void 0,l(e.events.change),e.movable.dests=void 0,e.turnColor=o.opposite(e.turnColor),!0}function d(e,t,n){var r=c(e,t,n);return r&&(e.movable.dests=void 0,e.turnColor=o.opposite(e.turnColor),e.animation.current=void 0),r}function p(e,t,n){if(g(e,t,n)){var r=d(e,t,n);if(r){var o=e.hold.stop();h(e);var a={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return!0!==r&&(a.captured=r),l(e.movable.events.after,t,n,a),!0}}else if(function(e,t,n){return t!==n&&m(e,t)&&i.premove(e.pieces,t,e.premovable.castle).includes(n)}(e,t,n))return function(e,t,n,r){u(e),e.premovable.current=[t,n],l(e.premovable.events.set,t,n,r)}(e,t,n,{ctrlKey:e.stats.ctrlKey}),h(e),!0;return h(e),!1}function v(e,t){e.selected=t,m(e,t)?e.premovable.dests=i.premove(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function h(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function b(e,t){var n=e.pieces.get(t);return!!n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}function g(e,t,n){var r,o;return t!==n&&b(e,t)&&(e.movable.free||!!(null===(o=null===(r=e.movable.dests)||void 0===r?void 0:r.get(t))||void 0===o?void 0:o.includes(n)))}function m(e,t){var n=e.pieces.get(t);return!!n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function y(e){s(e),u(e),h(e)}t.callUserFunction=l,t.toggleOrientation=function(e){e.orientation=o.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},t.reset=function(e){e.lastMove=void 0,h(e),s(e),u(e)},t.setPieces=function(e,t){var n=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=r(a.value,2),u=s[0],c=s[1];c?e.pieces.set(u,c):e.pieces.delete(u)}}catch(f){o=!0,i=f}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}},t.setCheck=function(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t){var n=!0,o=!1,i=void 0;try{for(var a,l=e.pieces[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=r(a.value,2),u=s[0],c=s[1];"king"===c.role&&c.color===t&&(e.check=u)}}catch(f){o=!0,i=f}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}}},t.unsetPremove=s,t.unsetPredrop=u,t.baseMove=c,t.baseNewPiece=f,t.userMove=p,t.dropNewPiece=function(e,t,n,r){var o=e.pieces.get(t);o&&(function(e,t,n){var r=e.pieces.get(t);return!!r&&(t===n||!e.pieces.has(n))&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}(e,t,n)||r)?(e.pieces.delete(t),f(e,o,n,r),l(e.movable.events.afterNewPiece,o.role,n,{predrop:!1})):o&&function(e,t,n){var r=e.pieces.get(t),o=e.pieces.get(n);return!!r&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==r.role||"1"!==n[1]&&"8"!==n[1])&&e.movable.color===r.color&&e.turnColor!==r.color}(e,t,n)?function(e,t,n){s(e),e.predroppable.current={role:t,key:n},l(e.predroppable.events.set,t,n)}(e,o.role,n):(s(e),u(e)),e.pieces.delete(t),h(e)},t.selectSquare=function(e,t,n){if(l(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return h(e),void e.hold.cancel();if((e.selectable.enabled||n)&&e.selected!==t&&p(e,e.selected,t))return void(e.stats.dragged=!1)}(b(e,t)||m(e,t))&&(v(e,t),e.hold.start())},t.setSelected=v,t.unselect=h,t.canMove=g,t.isDraggable=function(e,t){var n=e.pieces.get(t);return!!n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))},t.playPremove=function(e){var t=e.premovable.current;if(!t)return!1;var n=t[0],r=t[1],o=!1;if(g(e,n,r)){var i=d(e,n,r);if(i){var a={premove:!0};!0!==i&&(a.captured=i),l(e.movable.events.after,n,r,a),o=!0}}return s(e),o},t.playPredrop=function(e,t){var n=e.predroppable.current,r=!1;return!!n&&(t(n)&&f(e,{role:n.role,color:e.movable.color},n.key)&&(l(e.movable.events.afterNewPiece,n.role,n.key,{predrop:!0}),r=!0),u(e),r)},t.cancelMove=y,t.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,y(e)},t.getKeyAtDomPos=function(e,t,n){var r=Math.floor(8*(e[0]-n.left)/n.width);t||(r=7-r);var i=7-Math.floor(8*(e[1]-n.top)/n.height);return t||(i=7-i),r>=0&&r<8&&i>=0&&i<8?o.pos2key([r,i]):void 0},t.getSnappedKeyAtDomPos=function(e,t,n,l){var s=o.key2pos(e),u=o.allPos.filter(function(e){return i.queen(s[0],s[1],e[0],e[1])||i.knight(s[0],s[1],e[0],e[1])}),c=u.map(function(e){return a.computeSquareCenter(o.pos2key(e),n,l)}).map(function(e){return o.distanceSq(t,e)}),f=c.reduce(function(e,t,n){return e[0]<t?e:[t,n]},[c[0],0]),d=r(f,2)[1];return o.pos2key(u[d])},t.whitePov=function(e){return"white"===e.orientation}},97:function(e,t,n){var r=n(147),o=n(148),i=n(149);e.exports=function(e,t){return r(e)||o(e,t)||i()}}}]);
//# sourceMappingURL=1.4077ecfb.chunk.js.map