{"version":3,"sources":["components/FormField.js","auth/AuthService.js","auth/SignUpPage.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","FormField","_ref","label","_ref$control","control","a","createElement","className","type","React","cloneElement","_services_ApiService__WEBPACK_IMPORTED_MODULE_0__","tcomb__WEBPACK_IMPORTED_MODULE_1__","tcomb__WEBPACK_IMPORTED_MODULE_1___default","_services_HistoryProvider__WEBPACK_IMPORTED_MODULE_2__","_Routes__WEBPACK_IMPORTED_MODULE_3__","_store__WEBPACK_IMPORTED_MODULE_4__","_store_AuthReducer__WEBPACK_IMPORTED_MODULE_5__","LoginRequest","t","struct","email","String","password","LoginResponse","token","SignUpRequest","username","SignUpResponse","user","Object","__webpack_exports__","login","handleInvalidCredentials","request","ApiService","post","then","res","status","response","data","store","dispatch","loginSuccessAction","HistoryProvider","getHistory","push","LIST_DATABASE","signUp","_ref2","handleError","console","log","catch","e","BASE_STATE","confirmPassword","errors","SignUpPage","props","_this","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","handleChange","event","name","target","setState","C_Users_Lucas_Documents_dev_chess_ui_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","value","setErrors","boolean","handleSubmit","preventDefault","state","AuthService","react__WEBPACK_IMPORTED_MODULE_6___default","onSubmit","style","maxWidth","margin","_components_FormField__WEBPACK_IMPORTED_MODULE_7__","required","onChange","Component"],"mappings":"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","file":"static/js/12.fd0a338f.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst FormField = ({\r\n                     label,\r\n                     control = <input className=\"input\" type=\"text\"/>\r\n}) => (\r\n  <div className=\"field\">\r\n    {label && <label className=\"label\">{label}</label>}\r\n\r\n    <div className=\"control\">\r\n      {React.cloneElement(control)}\r\n    </div>\r\n  </div>\r\n)\r\n\r\nexport default FormField;\r\n","import ApiService from \"../services/ApiService\";\r\nimport t from \"tcomb\";\r\nimport HistoryProvider from \"../services/HistoryProvider\";\r\nimport {LIST_DATABASE} from \"../Routes\";\r\nimport store from \"../store\";\r\nimport {loginSuccessAction} from \"../store/AuthReducer\";\r\n\r\nconst LoginRequest = t.struct({\r\n  email: t.String,\r\n  password: t.String\r\n}, \"LoginRequest\")\r\n\r\nconst LoginResponse = t.struct({\r\n  token: t.String\r\n}, \"LoginResponse\")\r\n\r\nconst SignUpRequest = t.struct({\r\n  email: t.String,\r\n  password: t.String,\r\n  username: t.String\r\n})\r\nconst SignUpResponse = t.struct({\r\n  token: t.String,\r\n  user: t.Object\r\n})\r\nexport default {\r\n  login: ({email, password, handleInvalidCredentials}) => {\r\n    const request = LoginRequest({email, password});\r\n      ApiService.post(\"/login\", request).then(res => {\r\n        if (res.status === 401 || res.status === 403) {\r\n          handleInvalidCredentials();\r\n        } else if (res.status === 200) {\r\n          let response = LoginResponse(res.data)\r\n          store.dispatch(loginSuccessAction(response.token));\r\n          HistoryProvider.getHistory().push(LIST_DATABASE)\r\n        } else {\r\n          throw res\r\n        }\r\n      })\r\n  },\r\n  signUp: ({email, password, username, handleError}) => {\r\n    const request = SignUpRequest({email, password, username});\r\n    ApiService.post(\"/user/signup\", request).then(res => {\r\n      console.log(res.status);\r\n      if (res.status === 200 || res.status === 201) {\r\n        const response = SignUpResponse(res.data);\r\n        store.dispatch(loginSuccessAction(response.token));\r\n        HistoryProvider.getHistory().push(LIST_DATABASE)\r\n      } else {\r\n        handleError();\r\n      }\r\n    }).catch(e => {\r\n      handleError();\r\n    })\r\n  }\r\n}\r\n\r\n","import React from \"react\"\r\nimport FormField from \"../components/FormField\";\r\nimport ApiService from \"../services/ApiService\";\r\nimport AuthService from \"./AuthService\";\r\nconst BASE_STATE = {\r\n    email:\"\",\r\n    password:\"\",\r\n    username: \"\",\r\n    confirmPassword: \"\",\r\n    errors: false\r\n}\r\nclass SignUpPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = BASE_STATE\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        const name = event.target.name;\r\n        this.setState({\r\n            [name]: event.target.value\r\n        });\r\n    }\r\n\r\n    setErrors = (boolean) => () => this.setState({errors: boolean});\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (this.state.password !== this.state.confirmPassword) {\r\n            this.setErrors(true)();\r\n        } else {\r\n            AuthService.signUp({\r\n                email: this.state.email,\r\n                password: this.state.password,\r\n                username: this.state.username,\r\n                handleError: this.setErrors(true)\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form onSubmit={this.handleSubmit} style={{maxWidth: \"500px\", margin:\"auto\"}}>\r\n                <FormField label=\"Email\"\r\n                           control={<input name=\"email\" className=\"input\" type=\"email\" required onChange={this.handleChange} value={this.state.email}/>}\r\n                />\r\n                <FormField label=\"Username\"\r\n                           control={<input name=\"username\" className=\"input\" type=\"text\" required onChange={this.handleChange} value={this.state.username}/>}\r\n                />\r\n                <FormField label=\"Password\"\r\n                           control={<input name=\"password\" className=\"input\" type=\"password\" required onChange={this.handleChange} value={this.state.password}/>}\r\n                />\r\n                <FormField label=\"Confirm Password\"\r\n                           control={<input name=\"confirmPassword\" className=\"input\" type=\"password\" required onChange={this.handleChange} value={this.state.confirmPassword}/>}\r\n                />\r\n                <FormField control={<button className=\"button is-link\" type=\"submit\">Valider</button>}/>\r\n                {this.state.errors && <div className=\"notification is-danger is-light\">Erreur</div>}\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SignUpPage;"],"sourceRoot":""}